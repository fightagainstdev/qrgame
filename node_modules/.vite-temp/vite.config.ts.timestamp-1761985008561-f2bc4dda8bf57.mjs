// vite.config.ts
import { defineConfig, normalizePath } from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/vite/dist/node/index.js";
import path from "node:path";
import url from "node:url";

// tools/compiler/compiler.ts
import {
  rollup
} from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/rollup/dist/es/rollup.js";
import { build as esbuild } from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/esbuild/lib/main.js";

// tools/compiler/rollupTypeScriptPlugin.ts
import typescript from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/@rollup/plugin-typescript/dist/es/index.js";

// tools/compiler/inline-const-enum/transform.ts
import ts2 from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";

// tools/compiler/const-enum/utils.ts
import ts from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";
function evaluate(expr, known) {
  if (ts.isPrefixUnaryExpression(expr)) {
    const value = evaluate(expr.operand, known);
    if (typeof value === "number") {
      switch (expr.operator) {
        case ts.SyntaxKind.PlusToken:
          return value;
        case ts.SyntaxKind.MinusToken:
          return -value;
        case ts.SyntaxKind.TildeToken:
          return ~value;
      }
    }
  } else if (ts.isBinaryExpression(expr)) {
    const left = evaluate(expr.left, known);
    const right = evaluate(expr.right, known);
    if (typeof left === "number" && typeof right === "number") {
      switch (expr.operatorToken.kind) {
        case ts.SyntaxKind.BarToken:
          return left | right;
        case ts.SyntaxKind.AmpersandToken:
          return left & right;
        case ts.SyntaxKind.GreaterThanGreaterThanToken:
          return left >> right;
        case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:
          return left >>> right;
        case ts.SyntaxKind.LessThanLessThanToken:
          return left << right;
        case ts.SyntaxKind.CaretToken:
          return left ^ right;
        case ts.SyntaxKind.AsteriskToken:
          return left * right;
        case ts.SyntaxKind.SlashToken:
          return left / right;
        case ts.SyntaxKind.PlusToken:
          return left + right;
        case ts.SyntaxKind.MinusToken:
          return left - right;
        case ts.SyntaxKind.PercentToken:
          return left % right;
        case ts.SyntaxKind.AsteriskAsteriskToken:
          return left ** right;
      }
    } else if (typeof left === "string" && typeof right === "string" && expr.operatorToken.kind === ts.SyntaxKind.PlusToken) {
      return left + right;
    }
  } else if (ts.isStringLiteralLike(expr)) {
    return expr.text;
  } else if (ts.isNumericLiteral(expr)) {
    return +expr.text;
  } else if (ts.isParenthesizedExpression(expr)) {
    return evaluate(expr.expression, known);
  } else if (ts.isIdentifier(expr)) {
    const value = known.get(expr.text);
    if (value === void 0) {
      throw new Error("unsupported enum. must reference self value");
    }
    return value;
  }
  throw new Error("unexpected evaluation for enum member: " + expr.getText);
}
function hasModifier(node, modifier) {
  return ts.canHaveModifiers(node) && ts.getModifiers(node)?.some((mod) => mod.kind === modifier);
}

// tools/compiler/inline-const-enum/transform.ts
var tsInlineConstEnums = (program) => {
  const typeChecker = program.getTypeChecker();
  function transformNodeAndChildren(node, ctx) {
    return ts2.visitEachChild(
      transformNode(node),
      (childNode) => transformNodeAndChildren(childNode, ctx),
      ctx
    );
  }
  function transformNode(node) {
    if (ts2.isPropertyAccessExpression(node)) {
      const tp2 = typeChecker.getTypeAtLocation(node.expression);
      if (tp2 && tp2.symbol && tp2.symbol.flags & ts2.SymbolFlags.ConstEnum) {
        const tp = typeChecker.getTypeAtLocation(node.name);
        if (tp && tp.symbol) {
          if (tp.symbol.flags & ts2.SymbolFlags.EnumMember) {
            if (tp.symbol.valueDeclaration) {
              if (ts2.isEnumMember(tp.symbol.valueDeclaration)) {
                const init = tp.symbol.valueDeclaration?.initializer;
                if (init) {
                  const newNode = getConstantValue(init);
                  if (newNode) {
                    return newNode;
                  } else {
                    console.warn("failed to create initializer for ", init.getText());
                  }
                } else {
                  console.warn("miss initializer for ", node.getText());
                }
              }
            }
          }
        }
      }
    }
    return node;
  }
  return (ctx) => {
    return (sourceFile) => transformNodeAndChildren(sourceFile, ctx);
  };
};
function getConstantValue(expression) {
  if (!expression) {
    return null;
  }
  if (ts2.isPrefixUnaryExpression(expression)) {
    return ts2.factory.createPrefixUnaryExpression(expression.operator, getConstantValue(expression.operand));
  } else if (ts2.isStringLiteralLike(expression)) {
    return ts2.factory.createStringLiteral(expression.text);
  } else if (ts2.isNumericLiteral(expression)) {
    return ts2.factory.createNumericLiteral(expression.text);
  } else if (expression.kind === ts2.SyntaxKind.TrueKeyword || expression.kind === ts2.SyntaxKind.FalseKeyword || expression.kind === ts2.SyntaxKind.NullKeyword) {
    return ts2.factory.createToken(expression.kind);
  } else {
    try {
      const result = evaluate(expression, /* @__PURE__ */ new Map());
      if (typeof result === "string") {
        return ts2.factory.createStringLiteral(result);
      } else if (typeof result === "number") {
        return ts2.factory.createNumericLiteral(result.toString());
      }
    } catch {
    }
  }
  return null;
}

// tools/compiler/const-enum/transform.ts
import ts3 from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";
var tsOptimizeConstEnums = (program, pluginOptions) => {
  return (ctx) => {
    return (sourceFile) => {
      return ts3.visitEachChild(sourceFile, visitor, ctx);
      function visitor(node) {
        if (!ts3.isEnumDeclaration(node)) {
          return ts3.visitEachChild(node, visitor, ctx);
        }
        if (!hasModifier(node, ts3.SyntaxKind.ConstKeyword)) {
          return node;
        }
        if (sourceFile.isDeclarationFile) {
          return ts3.visitEachChild(node, stripConstKeyword, ctx);
        }
        return transformEnum(node);
      }
    };
  };
  function stripConstKeyword(node) {
    return node.kind === ts3.SyntaxKind.ConstKeyword ? void 0 : node;
  }
  function transformEnum(node) {
    const members = node.members;
    const known = /* @__PURE__ */ new Map();
    const properties = [];
    let lastValue = -1;
    for (const member of members) {
      if (!member.name) {
        continue;
      }
      if (!ts3.isIdentifier(member.name)) {
        throw new Error("The name of enum member must be an identifier");
      }
      const name = member.name.text;
      let value;
      let valueExpr;
      if (member.initializer) {
        value = evaluate(member.initializer, known);
        if (typeof value === "number") {
          valueExpr = value >= 0 ? ts3.factory.createNumericLiteral(value) : ts3.factory.createPrefixUnaryExpression(
            ts3.SyntaxKind.MinusToken,
            ts3.factory.createNumericLiteral(-value)
          );
          lastValue = value;
        } else if (typeof value === "string") {
          valueExpr = ts3.factory.createStringLiteral(value);
          lastValue = value;
        } else throw new Error("Unsupported member value");
      } else {
        if (typeof lastValue === "string") {
          throw new Error("Invalid enum");
        }
        value = ++lastValue;
        valueExpr = ts3.factory.createNumericLiteral(value);
      }
      const assignment = ts3.factory.createPropertyAssignment(name, valueExpr);
      ts3.setSourceMapRange(assignment, ts3.getSourceMapRange(member));
      properties.push(assignment);
      known.set(name, value);
    }
    const result = ts3.factory.createVariableStatement(
      node.modifiers,
      ts3.factory.createVariableDeclarationList(
        [
          ts3.factory.createVariableDeclaration(
            node.name,
            void 0,
            void 0,
            ts3.factory.createAsExpression(
              ts3.factory.createObjectLiteralExpression(properties, true),
              ts3.factory.createTypeReferenceNode(ts3.factory.createIdentifier("const"), void 0)
            )
          )
        ],
        ts3.NodeFlags.Const
      )
    );
    ts3.setSourceMapRange(result, ts3.getSourceMapRange(node));
    return result;
  }
};

// tools/compiler/mangler/transformer.ts
import ts6 from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";

// tools/compiler/mangler/exports-symbol-tree.ts
import ts5 from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";

// tools/compiler/mangler/typescript-helpers.ts
import ts4 from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/typescript/lib/typescript.js";
var namedDeclarationKinds = [
  ts4.SyntaxKind.InterfaceDeclaration,
  ts4.SyntaxKind.ClassDeclaration,
  ts4.SyntaxKind.EnumDeclaration,
  ts4.SyntaxKind.TypeAliasDeclaration,
  ts4.SyntaxKind.ModuleDeclaration,
  ts4.SyntaxKind.FunctionDeclaration,
  ts4.SyntaxKind.VariableDeclaration,
  ts4.SyntaxKind.PropertySignature,
  ts4.SyntaxKind.Parameter
];
function isNodeNamedDeclaration(node) {
  return namedDeclarationKinds.indexOf(node.kind) !== -1;
}
function getActualSymbol(symbol, typeChecker) {
  if (symbol.flags & ts4.SymbolFlags.Alias) {
    symbol = typeChecker.getAliasedSymbol(symbol);
  }
  return symbol;
}
function splitTransientSymbol(symbol, typeChecker) {
  if ((symbol.flags & ts4.SymbolFlags.Transient) === 0) {
    return [symbol];
  }
  const declarations = getDeclarationsForSymbol(symbol);
  const result = [];
  for (const declaration of declarations) {
    if (!isNodeNamedDeclaration(declaration) || declaration.name === void 0) {
      continue;
    }
    const sym = typeChecker.getSymbolAtLocation(declaration.name);
    if (sym === void 0) {
      continue;
    }
    result.push(getActualSymbol(sym, typeChecker));
  }
  return result;
}
function getDeclarationsForSymbol(symbol) {
  const result = [];
  if (symbol.declarations !== void 0) {
    result.push(...symbol.declarations);
  }
  if (symbol.valueDeclaration !== void 0) {
    if (!result.includes(symbol.valueDeclaration)) {
      result.push(symbol.valueDeclaration);
    }
  }
  return result;
}
function getExportsForSourceFile(typeChecker, sourceFileSymbol) {
  if (sourceFileSymbol.exports !== void 0) {
    const commonJsExport = sourceFileSymbol.exports.get(ts4.InternalSymbolName.ExportEquals);
    if (commonJsExport !== void 0) {
      return [getActualSymbol(commonJsExport, typeChecker)];
    }
  }
  const result = typeChecker.getExportsOfModule(sourceFileSymbol);
  if (sourceFileSymbol.exports !== void 0) {
    const defaultExportSymbol = sourceFileSymbol.exports.get(ts4.InternalSymbolName.Default);
    if (defaultExportSymbol !== void 0) {
      if (!result.includes(defaultExportSymbol)) {
        result.push(defaultExportSymbol);
      }
    }
  }
  return result.map((symbol) => getActualSymbol(symbol, typeChecker));
}
function isClassMember(node) {
  return ts4.isMethodDeclaration(node) || ts4.isPropertyDeclaration(node) || ts4.isGetAccessor(node) || ts4.isSetAccessor(node);
}
function getClassOfMemberSymbol(nodeSymbol) {
  const classMembers = getClassMemberDeclarations(nodeSymbol);
  if (classMembers.length !== 0) {
    const classMember = classMembers[0];
    if (isConstructorParameter(classMember)) {
      return classMember.parent.parent;
    }
    return classMember.parent;
  }
  return null;
}
function hasPrivateKeyword(node) {
  return hasModifier2(node, ts4.SyntaxKind.PrivateKeyword);
}
function getModifiers(node) {
  if (isBreakingTypeScriptApi(ts4)) {
    if (!ts4.canHaveModifiers(node)) {
      return [];
    }
    return ts4.getModifiers(node) || [];
  }
  return node.modifiers || [];
}
function hasModifier2(node, modifier) {
  return getModifiers(node).some((mod) => mod.kind === modifier);
}
function getDecorators(node) {
  if (isBreakingTypeScriptApi(ts4)) {
    if (!ts4.canHaveDecorators(node)) {
      return [];
    }
    return ts4.getDecorators(node) || [];
  }
  return node.decorators || [];
}
function hasDecorators(node) {
  return getDecorators(node).length !== 0;
}
function isConstructorParameter(node) {
  return ts4.isParameter(node) && ts4.isConstructorDeclaration(node.parent) && (hasModifier2(node, ts4.SyntaxKind.PublicKeyword) || hasModifier2(node, ts4.SyntaxKind.ProtectedKeyword) || hasModifier2(node, ts4.SyntaxKind.PrivateKeyword) || hasModifier2(node, ts4.SyntaxKind.ReadonlyKeyword));
}
function getClassMemberDeclarations(symbol) {
  if (symbol === void 0) {
    return [];
  }
  const declarations = symbol.getDeclarations();
  if (declarations === void 0) {
    return [];
  }
  return declarations.filter((x) => {
    return isClassMember(x) || isConstructorParameter(x);
  });
}
function isSymbolClassMember(symbol) {
  return getClassMemberDeclarations(symbol).length !== 0;
}
function isPrivateClassMember(symbol) {
  return getClassMemberDeclarations(symbol).some(hasPrivateKeyword);
}
function getNodeJSDocComment(node) {
  const start = node.getStart();
  const jsDocStart = node.getStart(void 0, true);
  return node.getSourceFile().getFullText().substring(jsDocStart, start).trim();
}
function isBreakingTypeScriptApi(compiler) {
  return "canHaveDecorators" in compiler;
}

// tools/compiler/mangler/exports-symbol-tree.ts
var ExportsSymbolTree = class {
  constructor(program, entrySourceFiles) {
    this.exportsTree = /* @__PURE__ */ new Map();
    this.program = program;
    this.computeTreeForExports(entrySourceFiles);
  }
  isSymbolAccessibleFromExports(symbol) {
    symbol = this.getActualSymbol(symbol);
    let result = false;
    this.exportsTree.forEach((set) => {
      result = result || set.has(symbol);
    });
    return result;
  }
  computeTreeForExports(entrySourceFiles) {
    this.exportsTree.clear();
    const typeChecker = this.program.getTypeChecker();
    for (const filePath of entrySourceFiles) {
      const sourceFile = this.program.getSourceFile(filePath);
      if (sourceFile === void 0) {
        throw new Error(`Cannot find source file ${filePath}`);
      }
      const entrySourceFile = typeChecker.getSymbolAtLocation(sourceFile);
      if (entrySourceFile === void 0) {
        continue;
      }
      for (const entryExportSymbol of getExportsForSourceFile(typeChecker, entrySourceFile)) {
        const exportSymbolsSet = /* @__PURE__ */ new Set();
        this.exportsTree.set(entryExportSymbol, exportSymbolsSet);
        for (const exportDeclaration of getDeclarationsForSymbol(entryExportSymbol)) {
          this.computeTreeForChildren(exportSymbolsSet, exportDeclaration, /* @__PURE__ */ new Set());
        }
      }
    }
  }
  computeTreeForChildren(targetSymbolsSet, node, visitedSymbols) {
    if (ts5.isVariableDeclaration(node)) {
      const typeChecker = this.program.getTypeChecker();
      const variableType = typeChecker.getTypeAtLocation(node);
      const variableTypeSymbol = variableType.getSymbol();
      if (variableTypeSymbol !== void 0) {
        targetSymbolsSet.add(variableTypeSymbol);
      }
      return;
    }
    ts5.forEachChild(node, (childNode) => this.computeTreeForNode(targetSymbolsSet, childNode, visitedSymbols));
  }
  computeTreeForNode(targetSymbolsSet, node, visitedSymbols) {
    if (ts5.isVariableStatement(node)) {
      for (const varDeclaration of node.declarationList.declarations) {
        this.computeTreeForNode(targetSymbolsSet, varDeclaration, visitedSymbols);
      }
      return;
    }
    if (node.kind === ts5.SyntaxKind.JSDoc || ts5.isBlock(node)) {
      return;
    }
    if (isClassMember(node) && hasPrivateKeyword(node)) {
      return;
    }
    if (ts5.isIdentifier(node)) {
      const symbol = this.getSymbol(node);
      if (symbol === null) {
        return;
      }
      if (visitedSymbols.has(symbol)) {
        return;
      }
      visitedSymbols.add(symbol);
      for (const childSymbol of splitTransientSymbol(symbol, this.program.getTypeChecker())) {
        targetSymbolsSet.add(childSymbol);
        for (const exportDeclaration of getDeclarationsForSymbol(childSymbol)) {
          this.computeTreeForChildren(targetSymbolsSet, exportDeclaration, visitedSymbols);
        }
      }
    }
    this.computeTreeForChildren(targetSymbolsSet, node, visitedSymbols);
  }
  getSymbol(node) {
    const nodeSymbol = this.program.getTypeChecker().getSymbolAtLocation(node);
    if (nodeSymbol === void 0) {
      return null;
    }
    return this.getActualSymbol(nodeSymbol);
  }
  getActualSymbol(symbol) {
    return getActualSymbol(symbol, this.program.getTypeChecker());
  }
};

// tools/compiler/mangler/transformer.ts
var defaultOptions = {
  entrySourceFiles: [],
  privatePrefix: "_private_",
  internalPrefix: "_internal_",
  publicJSDocTag: "public",
  ignoreDecorated: false
};
function propertiesRenameTransformer(program, config) {
  return createTransformerFactory(program, config);
}
function createTransformerFactory(program, options) {
  const fullOptions = { ...defaultOptions, ...options };
  const typeChecker = program.getTypeChecker();
  const exportsSymbolTree = new ExportsSymbolTree(program, fullOptions.entrySourceFiles);
  const cache = /* @__PURE__ */ new Map();
  function putToCache(nodeSymbol, val) {
    cache.set(nodeSymbol, val);
    return val;
  }
  return (context) => {
    function transformNodeAndChildren(node, ctx) {
      return ts6.visitEachChild(
        transformNode(node),
        (childNode) => transformNodeAndChildren(childNode, ctx),
        ctx
      );
    }
    function transformNode(node) {
      if (ts6.isShorthandPropertyAssignment(node)) {
        return handleShorthandPropertyAssignment(node);
      }
      if (ts6.isBindingElement(node) && node.propertyName === void 0 && ts6.isObjectBindingPattern(node.parent)) {
        return handleShorthandObjectBindingElement(node);
      }
      if (node.parent && ts6.isStringLiteral(node) && ts6.isBinaryExpression(node.parent) && node.parent.operatorToken.kind === ts6.SyntaxKind.InKeyword) {
        return handleInKeyword(node);
      }
      if (ts6.isIdentifier(node) && node.parent) {
        if (ts6.isPropertyAccessExpression(node.parent) && node.parent.name === node) {
          return handlePropertyAccessIdentifier(node);
        }
        if (isClassMember(node.parent) && node.parent.name === node) {
          return handleClassMember(node);
        }
        if (ts6.isEnumMember(node.parent) && node.parent.name === node) {
          return handleEnumMember(node);
        }
        if (ts6.isPropertyAssignment(node.parent) && node.parent.name === node) {
          return handlePropertyAssignment(node);
        }
        if (ts6.isBindingElement(node.parent) && node.parent.propertyName === node) {
          return handleBindingElement(node);
        }
        if (ts6.isJsxAttribute(node.parent) && node.parent.name === node) {
          return handleJsxAttributeName(node);
        }
        if (isConstructorParameter(node.parent) && node.parent.name === node || isConstructorParameterReference(node)) {
          return handleCtorParameter(node);
        }
      }
      if (node.parent && ts6.isStringLiteral(node) && ts6.isElementAccessExpression(node.parent) && node.parent.argumentExpression === node) {
        return handleElementAccessExpression(node);
      }
      return node;
    }
    function handleInKeyword(node) {
      const parent = node.parent;
      const nodeType = typeChecker.getTypeAtLocation(node);
      if (!nodeType.isStringLiteral()) {
        throw new Error(`Can't get type for left expression in ${node.parent.getText()}`);
      }
      const propertyName = nodeType.value;
      if (isTypePropertyExternal(typeChecker.getTypeAtLocation(parent.right), propertyName)) {
        return node;
      }
      return createNewNode(propertyName, 0 /* Internal */, context.factory.createStringLiteral);
    }
    function handlePropertyAccessIdentifier(node) {
      return createNewIdentifier(node);
    }
    function handleElementAccessExpression(node) {
      const visibilityType = getNodeVisibilityType(node);
      if (visibilityType === 2 /* External */) {
        return node;
      }
      return createNewNodeFromProperty(node, visibilityType, context.factory.createStringLiteral);
    }
    function handleClassMember(node) {
      return createNewIdentifier(node);
    }
    function handleEnumMember(node) {
      return createNewIdentifier(node);
    }
    function handleBindingElement(node) {
      return createNewIdentifier(node);
    }
    function handleJsxAttributeName(node) {
      return createNewIdentifier(node);
    }
    function handlePropertyAssignment(node) {
      return createNewIdentifier(node);
    }
    function handleShorthandPropertyAssignment(node) {
      const visibilityType = getNodeVisibilityType(node.name);
      if (visibilityType === 2 /* External */) {
        return node;
      }
      return createNewNodeFromProperty(node.name, visibilityType, (newName) => {
        return context.factory.createPropertyAssignment(newName, node.name);
      });
    }
    function handleShorthandObjectBindingElement(node) {
      if (!ts6.isIdentifier(node.name)) {
        return node;
      }
      const visibilityType = getNodeVisibilityType(node);
      if (visibilityType === 2 /* External */) {
        return node;
      }
      return createNewNodeFromProperty(node.name, visibilityType, (newName) => {
        return context.factory.createBindingElement(node.dotDotDotToken, newName, node.name, node.initializer);
      });
    }
    function handleCtorParameter(node) {
      return createNewIdentifier(node);
    }
    function createNewIdentifier(oldIdentifier) {
      const visibilityType = getNodeVisibilityType(oldIdentifier);
      if (visibilityType === 2 /* External */) {
        return oldIdentifier;
      }
      return createNewNodeFromProperty(oldIdentifier, visibilityType, context.factory.createIdentifier);
    }
    function createNewNodeFromProperty(oldProperty, type, createNode) {
      const symbol = typeChecker.getSymbolAtLocation(oldProperty);
      if (symbol === void 0) {
        throw new Error(`Cannot get symbol for node "${oldProperty.getText()}"`);
      }
      const oldPropertyName = ts6.unescapeLeadingUnderscores(symbol.escapedName);
      return createNewNode(oldPropertyName, type, createNode);
    }
    function createNewNode(oldPropertyName, type, createNode) {
      const newPropertyName = getNewName(oldPropertyName, type);
      return createNode(newPropertyName);
    }
    function getNewName(originalName, type) {
      return `${type === 1 /* Private */ ? fullOptions.privatePrefix : fullOptions.internalPrefix}${originalName}`;
    }
    function getActualSymbol2(symbol) {
      if (symbol.flags & ts6.SymbolFlags.Alias) {
        symbol = typeChecker.getAliasedSymbol(symbol);
      }
      return symbol;
    }
    function getNodeSymbol(node) {
      const symbol = typeChecker.getSymbolAtLocation(node);
      if (symbol === void 0) {
        return null;
      }
      return getActualSymbol2(symbol);
    }
    function isTypePropertyExternal(type, typePropertyName) {
      if (type.flags & ts6.TypeFlags.Unknown || type.flags & ts6.TypeFlags.Any) {
        return true;
      }
      if (type.flags & ts6.TypeFlags.IndexedAccess) {
        return isTypePropertyExternal(typeChecker.getApparentType(type), typePropertyName);
      }
      const symbol = type.getSymbol();
      const propertySymbol = typeChecker.getPropertyOfType(type, typePropertyName);
      if (type.flags & ts6.TypeFlags.Object) {
        const objectType = type;
        if (objectType.objectFlags & ts6.ObjectFlags.Tuple) {
          return true;
        }
        if (objectType.objectFlags & ts6.ObjectFlags.Reference) {
          const target = objectType.target;
          if (target !== objectType && isTypePropertyExternal(target, typePropertyName)) {
            return true;
          }
        }
        const propertyHasDeclarations = propertySymbol !== void 0 ? getDeclarationsForSymbol(propertySymbol).length !== 0 : false;
        if (objectType.objectFlags & ts6.ObjectFlags.Mapped && symbol !== void 0 && !propertyHasDeclarations && getSymbolVisibilityType(symbol) === 2 /* External */) {
          return true;
        }
      }
      if (type.isUnionOrIntersection()) {
        const hasExternalSubType = type.types.some((t) => isTypePropertyExternal(t, typePropertyName));
        if (hasExternalSubType) {
          return hasExternalSubType;
        }
      }
      if (symbol !== void 0) {
        const declarations = getDeclarationsForSymbol(symbol);
        for (const declaration of declarations) {
          if ((ts6.isClassDeclaration(declaration) || ts6.isInterfaceDeclaration(declaration)) && declaration.heritageClauses !== void 0) {
            const hasHeritageClausesExternals = declaration.heritageClauses.some((clause) => {
              return clause.types.some((expr) => {
                return isTypePropertyExternal(typeChecker.getTypeAtLocation(expr), typePropertyName);
              });
            });
            if (hasHeritageClausesExternals) {
              return true;
            }
          }
        }
      }
      if (propertySymbol === void 0) {
        return false;
      }
      return [propertySymbol, ...splitTransientSymbol(propertySymbol, typeChecker)].some(
        (sym) => getSymbolVisibilityType(sym) === 2 /* External */
      );
    }
    function getNodeVisibilityType(node) {
      if (ts6.isPropertyAssignment(node.parent) || ts6.isShorthandPropertyAssignment(node.parent)) {
        let expressionToGetTypeFrom = node.parent.parent;
        let lastKnownExpression = node.parent.parent;
        let currentNode = node.parent.parent.parent;
        while (ts6.isParenthesizedExpression(currentNode) || ts6.isAsExpression(currentNode)) {
          if (ts6.isAsExpression(currentNode)) {
            expressionToGetTypeFrom = lastKnownExpression;
            lastKnownExpression = currentNode;
          }
          currentNode = currentNode.parent;
        }
        const type = typeChecker.getContextualType(expressionToGetTypeFrom);
        if (type !== void 0 && isTypePropertyExternal(type, node.getText())) {
          return 2 /* External */;
        }
      }
      if (ts6.isPropertyAccessExpression(node.parent) || ts6.isElementAccessExpression(node.parent)) {
        if (ts6.isIdentifier(node.parent.expression)) {
          const expressionSymbol = typeChecker.getSymbolAtLocation(node.parent.expression);
          if (expressionSymbol !== void 0) {
            const isModuleOrStarImport = getDeclarationsForSymbol(expressionSymbol).some(
              (decl) => ts6.isNamespaceImport(decl) || ts6.isModuleDeclaration(decl)
            );
            if (isModuleOrStarImport) {
              return 2 /* External */;
            }
          }
        }
        if (isTypePropertyExternal(typeChecker.getTypeAtLocation(node.parent.expression), node.getText())) {
          return 2 /* External */;
        }
      }
      if (ts6.isBindingElement(node) && isTypePropertyExternal(typeChecker.getTypeAtLocation(node.parent), node.getText())) {
        return 2 /* External */;
      }
      if (ts6.isBindingElement(node.parent) && isTypePropertyExternal(typeChecker.getTypeAtLocation(node.parent.parent), node.getText())) {
        return 2 /* External */;
      }
      if (ts6.isJsxAttribute(node.parent)) {
        const jsxTagSymbol = typeChecker.getSymbolAtLocation(node.parent.parent.parent.tagName);
        if (jsxTagSymbol !== void 0 && jsxTagSymbol.valueDeclaration !== void 0) {
          const jsxPropsType = typeChecker.getTypeOfSymbolAtLocation(jsxTagSymbol, jsxTagSymbol.valueDeclaration);
          if (isTypePropertyExternal(jsxPropsType, node.getText())) {
            return 2 /* External */;
          }
        }
      }
      const nodeSymbol = getNodeSymbol(node);
      const classOfMember = nodeSymbol !== null ? getClassOfMemberSymbol(nodeSymbol) : null;
      if (classOfMember !== null && isTypePropertyExternal(typeChecker.getTypeAtLocation(classOfMember), node.getText())) {
        return 2 /* External */;
      }
      const symbol = ts6.isBindingElement(node) ? getShorthandObjectBindingElementSymbol(node) : nodeSymbol;
      if (symbol === null) {
        return 2 /* External */;
      }
      return getSymbolVisibilityType(symbol);
    }
    function getSymbolVisibilityType(nodeSymbol) {
      nodeSymbol = getActualSymbol2(nodeSymbol);
      const cachedValue = cache.get(nodeSymbol);
      if (cachedValue !== void 0) {
        return cachedValue;
      }
      const symbolDeclarations = getDeclarationsForSymbol(nodeSymbol);
      if (symbolDeclarations.some(isDeclarationFromExternals)) {
        return putToCache(nodeSymbol, 2 /* External */);
      }
      if (symbolDeclarations.some((decl) => hasModifier2(decl, ts6.SyntaxKind.DeclareKeyword))) {
        return putToCache(nodeSymbol, 2 /* External */);
      }
      if (nodeSymbol.escapedName === "prototype") {
        return putToCache(nodeSymbol, 2 /* External */);
      }
      if (fullOptions.publicJSDocTag.length !== 0 || fullOptions.ignoreDecorated) {
        for (const declaration of symbolDeclarations) {
          let currentNode = declaration;
          while (!ts6.isSourceFile(currentNode)) {
            if (fullOptions.publicJSDocTag.length !== 0 && getNodeJSDocComment(currentNode).includes(`@${fullOptions.publicJSDocTag}`)) {
              return putToCache(nodeSymbol, 2 /* External */);
            }
            if (fullOptions.ignoreDecorated && hasDecorators(currentNode)) {
              return putToCache(nodeSymbol, 2 /* External */);
            }
            if (ts6.isEnumDeclaration(currentNode)) {
              return putToCache(nodeSymbol, 2 /* External */);
            }
            currentNode = currentNode.parent;
          }
        }
      }
      if (isPrivateClassMember(nodeSymbol)) {
        return putToCache(nodeSymbol, 1 /* Private */);
      }
      if (exportsSymbolTree.isSymbolAccessibleFromExports(nodeSymbol)) {
        return putToCache(nodeSymbol, 2 /* External */);
      }
      for (const declaration of symbolDeclarations) {
        if (!isNodeNamedDeclaration(declaration.parent) || declaration.parent.name === void 0) {
          continue;
        }
        const parentSymbol = getNodeSymbol(declaration.parent.name);
        if (parentSymbol === null) {
          continue;
        }
        if (getSymbolVisibilityType(parentSymbol) === 2 /* External */) {
          return putToCache(nodeSymbol, 2 /* External */);
        }
      }
      return putToCache(nodeSymbol, 0 /* Internal */);
    }
    function getShorthandObjectBindingElementSymbol(element) {
      if (element.propertyName !== void 0) {
        throw new Error(
          `Cannot handle binding element with property name: ${element.getText()} in ${element.getSourceFile().fileName}`
        );
      }
      if (!ts6.isIdentifier(element.name)) {
        return null;
      }
      const type = typeChecker.getTypeAtLocation(element.parent);
      if (type.isUnion()) {
        return null;
      }
      return type.getProperty(ts6.idText(element.name)) || null;
    }
    function isDeclarationFromExternals(declaration) {
      const sourceFile = declaration.getSourceFile();
      return sourceFile.isDeclarationFile || program.isSourceFileDefaultLibrary(sourceFile) || /[\\/]node_modules[\\/]/.test(sourceFile.fileName);
    }
    function isConstructorParameterReference(node) {
      if (!ts6.isIdentifier(node)) {
        return false;
      }
      return isSymbolClassMember(typeChecker.getSymbolAtLocation(node));
    }
    return (sourceFile) => transformNodeAndChildren(sourceFile, context);
  };
}

// tools/compiler/rollupTypeScriptPlugin.ts
var rollupTypeScriptPlugin = (input) => typescript({
  tsconfig: "src/tsconfig.json",
  transformers: (program) => {
    return {
      before: [
        tsInlineConstEnums(program),
        tsOptimizeConstEnums(program),
        propertiesRenameTransformer(program, {
          entrySourceFiles: [input]
        })
      ],
      after: [],
      afterDeclarations: [
        //tsOptimizeConstEnums(program)
      ]
    };
  }
});

// tools/compiler/compiler.ts
import { writeFileSync } from "node:fs";
var buildIndexModuleNew = async (input, outfile) => {
  const logs = [];
  const inputOptions = {
    input,
    external: [],
    plugins: [
      // nodeResolve({}),
      // glslify(),
      // json(),
      rollupTypeScriptPlugin(input)
    ],
    logLevel: "debug",
    onLog: (log) => {
      logs.push(log);
    }
  };
  let bundle;
  let buildFailed = false;
  try {
    bundle = await rollup(inputOptions);
    console.info("count rollup logs:", logs.length);
    await generateOutputs(bundle);
  } catch (error) {
    buildFailed = true;
    console.error(error);
    throw error;
  }
  if (bundle) {
    await bundle.close();
  }
  return await postBuild(outfile);
};
async function generateOutputs(bundle) {
  const outputOptionsList = [
    {
      file: "build/index.js",
      format: "es",
      sourcemap: true
    }
  ];
  for (const outputOptions of outputOptionsList) {
    await bundle.write(outputOptions);
  }
}
var postBuild = async (outfile) => {
  const result = await esbuild({
    write: false,
    outfile,
    entryPoints: ["./build/index.js"],
    charset: "ascii",
    mangleProps: /^_(private|internal)_/,
    // mangleQuoted: false,
    minifyWhitespace: true,
    minifyIdentifiers: true,
    minifySyntax: true,
    minify: true,
    treeShaking: true,
    // define: defines,
    drop: ["debugger", "console"],
    legalComments: "none",
    keepNames: false,
    platform: "browser",
    target: ["esnext"],
    format: "esm",
    bundle: true,
    sourcemap: "external"
  });
  for (const error of result.errors) {
    console.error("ERROR:", error.text);
  }
  for (const warning of result.warnings) {
    console.warn("WARN:", warning.text);
  }
  if (result.outputFiles) {
    let code = "";
    let map = "{}";
    for (const outputFile of result.outputFiles) {
      if (outputFile.path.endsWith(".js")) {
        writeFileSync("build/index-esbuild.js", outputFile.text);
        console.info(
          "module: " + outputFile.path + " (" + outputFile.contents.byteLength + ")"
        );
        code = outputFile.text;
      } else if (outputFile.path.endsWith(".js.map")) {
        console.info(
          "sourcemap: " + outputFile.path + " (" + outputFile.contents.byteLength + ")"
        );
        map = outputFile.text;
      }
    }
    return {
      code,
      map: JSON.parse(map)
    };
  }
  throw new Error("fatal build error");
};

// tools/advzip.ts
import { execFileSync } from "node:child_process";
import { statSync } from "node:fs";
import advzip from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/advzip-bin/index.js";
var defaultAdvzipOptions = {
  shrinkLevel: "insane",
  pedantic: true
};
function advzipPlugin(options = defaultAdvzipOptions) {
  const advzipOptions = options;
  return {
    name: "vite:advzip",
    apply: "build",
    enforce: "post",
    closeBundle: async () => {
      try {
        const args = ["--recompress"];
        if (advzipOptions.pedantic) {
          args.push("--pedantic");
        }
        if (advzipOptions.shrinkLevel !== void 0) {
          if (typeof advzipOptions.shrinkLevel === "number") {
            args.push(`-${advzipOptions.shrinkLevel}`);
          } else {
            args.push(`--shrink-${advzipOptions.shrinkLevel}`);
          }
        }
        args.push("dist/index.zip");
        const result = execFileSync(advzip, args);
        console.log(result.toString().trim());
        const stats = statSync("dist/index.zip");
        console.info("advzip ZIP", stats.size);
      } catch (err) {
        console.log("advzip error", err);
      }
    }
  };
}

// tools/etc.ts
import { execFileSync as execFileSync2 } from "node:child_process";
import { statSync as statSync2 } from "node:fs";
import ect from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/ect-bin/index.js";
import { glob } from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/glob/dist/esm/index.js";
var defaultEctOptions = {
  level: 10009,
  strip: true,
  keep: false,
  strict: false
};
function ectPlugin(options = defaultEctOptions) {
  const ectOptions = options;
  return {
    name: "vite:ect",
    apply: "build",
    enforce: "post",
    closeBundle: async () => {
      const files = glob.sync("dist/**/*", { nodir: true }).sort((a) => a.endsWith(".html") ? -1 : 1);
      try {
        const args = [];
        if (ectOptions.quiet) {
          args.push("-quiet");
        }
        if (ectOptions.level !== void 0) {
          args.push(`-${ectOptions.level}`);
        }
        if (ectOptions.strip) {
          args.push("-strip");
        }
        if (ectOptions.keep) {
          args.push("-keep");
        }
        if (ectOptions.strict) {
          args.push("-strict");
        }
        args.push("-zip");
        console.info(...files);
        args.push(...files);
        const result = execFileSync2(ect, args);
        console.log("ECT result", result.toString().trim());
        const stats = statSync2("dist/index.zip");
        console.info("ECT ZIP", stats.size);
      } catch (err) {
        console.log("ECT error", err);
      }
    }
  };
}

// tools/roadroller.ts
import CleanCSS from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/clean-css/index.js";
import htmlMinify from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/html-minifier-terser/src/htmlminifier.js";
import {
  Packer
} from "file:///D:/code/cat-survivors-master/cat-survivors-master/node_modules/roadroller/index.mjs";

// tools/utils.ts
function escapeRegExp(str) {
  return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}

// tools/roadroller.ts
import { writeFileSync as writeFileSync2 } from "node:fs";
var OPTIMIZE = 3;
var defaultRoadrollerOptions = {
  allowFreeVars: true,
  // dynamicModels: 1,
  // precision: 16,
  maxMemoryMB: 512
  // sparseSelectors: defaultSparseSelectors(24),
};
var defaultHtmlMinifyOptions = {
  includeAutoGeneratedTags: true,
  removeAttributeQuotes: true,
  removeComments: true,
  removeRedundantAttributes: true,
  removeScriptTypeAttributes: true,
  removeStyleLinkTypeAttributes: true,
  sortClassName: true,
  useShortDoctype: true,
  collapseWhitespace: true,
  collapseInlineTagWhitespace: true,
  removeEmptyAttributes: true,
  removeOptionalTags: true,
  sortAttributes: true
};
function roadrollerPlugin(roadrollerOptions = defaultRoadrollerOptions, htmlMinifyOptions = defaultHtmlMinifyOptions) {
  const fullRoadrollerOptions = roadrollerOptions;
  const fullHtmlMinifyOptions = htmlMinifyOptions;
  return {
    name: "vite:roadroller",
    transformIndexHtml: {
      handler: async (html, ctx) => {
        if (!ctx || !ctx.bundle) {
          return html;
        }
        let result = html;
        const bundleKeys = Object.keys(ctx.bundle);
        const cssKey = bundleKeys.find((key) => key.endsWith(".css"));
        if (cssKey) {
          result = embedCss(result, ctx.bundle[cssKey]);
          delete ctx.bundle[cssKey];
        }
        result = await htmlMinify.minify(result, fullHtmlMinifyOptions);
        const jsKey = bundleKeys.find((key) => key.endsWith(".js"));
        if (jsKey) {
          result = await embedJs(
            result,
            ctx.bundle[jsKey],
            fullRoadrollerOptions
          );
          delete ctx.bundle[jsKey];
        }
        return result;
      }
    }
  };
}
async function embedJs(html, chunk, options) {
  const scriptTagRemoved = html.replace(
    new RegExp(`<script[^>]*?${escapeRegExp(chunk.fileName)}[^>]*?></script>`),
    ""
  );
  const htmlInJs = `document.write(\`${scriptTagRemoved}\`);${chunk.code.trim()}`;
  const bypassRoadRoller = false;
  writeFileSync2("build/minimified.js", htmlInJs);
  if (bypassRoadRoller) {
    return `<script>${htmlInJs}</script>`;
  }
  const inputs = [
    {
      data: htmlInJs,
      type: "js",
      action: "eval"
    }
  ];
  const packer = new Packer(inputs, options);
  let startSize = inputs[0].data.length;
  let bestSize = 0;
  let bestIterations = 0;
  process.stdout.write("\n");
  await packer.optimize(OPTIMIZE, (p) => {
    if (p.bestUpdated) {
      bestSize = p.bestSize;
      ++bestIterations;
      process.stdout.write("working... " + p.bestSize + "\r");
    }
  });
  const { firstLine, secondLine } = packer.makeDecoder();
  const resultHtml = `<script>${firstLine}${secondLine}</script>`;
  console.info("Start Size: " + startSize);
  console.info("Best Size: " + bestSize);
  console.info("Roller good iterations: " + bestIterations);
  console.info("Final (+decoder): " + resultHtml.length);
  writeFileSync2("build/roadroller.html", resultHtml);
  return resultHtml;
}
function embedCss(html, asset) {
  const reCSS = new RegExp(
    `<link [^>]*?href="[./]*${escapeRegExp(asset.fileName)}"[^>]*?>`
  );
  const code = `<style>${new CleanCSS({ level: 2 }).minify(asset.source).styles}</style>`;
  return html.replace(reCSS, code);
}

// vite.config.ts
var __vite_injected_original_import_meta_url = "file:///D:/code/cat-survivors-master/cat-survivors-master/vite.config.ts";
var getTerserOptions = (command) => {
  if (command === "build") {
    return {
      ecma: 2020,
      module: true,
      toplevel: true,
      parse: {
        html5_comments: false,
        shebang: false
      },
      format: {
        comments: false,
        shebang: false,
        ascii_only: true,
        quote_style: 1
        // keep_numbers: true,
      },
      compress: {
        dead_code: true,
        drop_debugger: true,
        drop_console: true,
        sequences: 1e6,
        passes: 1e6,
        inline: 3,
        pure_new: true,
        pure_getters: true,
        // unsafe: true,
        unsafe_arrows: true,
        unsafe_comps: true,
        unsafe_math: true,
        // comparisons: true,
        expression: true,
        hoist_funs: true,
        hoist_vars: false,
        toplevel: true,
        module: true
      },
      mangle: {
        module: true,
        toplevel: true,
        properties: {
          keep_quoted: "strict",
          regex: /^_(private|internal)_/
        }
      }
    };
  }
};
var rewriteSlashToIndexHtml = () => {
  return {
    name: "rewrite-slash-to-index-html",
    apply: "serve",
    enforce: "post",
    configureServer: (server) => {
      server.middlewares.use("/", (req, _, next) => {
        if (req.url === "/") {
          req.url = "/index.html";
        }
        next();
      });
    }
  };
};
var getDefines = (command, mode, buildForProd) => ({
  __BUILD_FOR_PROD__: JSON.stringify(buildForProd),
  __BUILD_FOR_DEV__: JSON.stringify(!buildForProd),
  __LOCAL_DEV_SERVER__: JSON.stringify(command !== "build"),
  __DEBUG_MODE__: JSON.stringify(command !== "build" && mode === "development")
});
var vite_config_default = ({ command, mode }) => {
  const buildForProd = process.env.BUILD_FOR === "production";
  return defineConfig({
    base: "./",
    appType: "mpa",
    build: {
      target: "esnext",
      minify: "terser",
      terserOptions: getTerserOptions(command),
      assetsInlineLimit: 0,
      assetsDir: "",
      reportCompressedSize: false,
      modulePreload: false,
      sourcemap: false,
      emptyOutDir: true,
      rollupOptions: {
        output: {
          assetFileNames: "[name].[ext]",
          entryFileNames: "i.js",
          chunkFileNames: "[name].[ext]"
        }
      }
    },
    server: {
      port: 8080,
      open: true,
      // headers: {
      // "Cross-Origin-Opener-Policy": "same-origin",
      // "Cross-Origin-Embedder-Policy": "require-corp",
      // },
      hmr: true,
      watch: {
        ignored: (p) => {
          const relativePath = path.relative(
            path.resolve(url.fileURLToPath(__vite_injected_original_import_meta_url), ".."),
            p
          );
          const norm = normalizePath(relativePath);
          return relativePath !== "" && relativePath !== "src" && !norm.startsWith("src/") && !norm.startsWith("public/");
        }
      }
    },
    publicDir: false,
    // assetsInclude: ["libs-bundle.js"],
    plugins: [
      // postProcessHtml(),
      rewriteSlashToIndexHtml(),
      {
        name: "build-game",
        load: async (id) => {
          if (id.endsWith("/src/index.ts") && command === "build") {
            console.info("PRE-BUILD ENTRY POINT!");
            return await buildIndexModuleNew(
              "./src/index.ts",
              "./src/index.js"
            );
          }
        }
      },
      process.env.ZIP && ectPlugin(),
      process.env.ZIP && advzipPlugin(),
      roadrollerPlugin()
    ],
    define: getDefines(command, mode, buildForProd)
  });
};
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAidG9vbHMvY29tcGlsZXIvY29tcGlsZXIudHMiLCAidG9vbHMvY29tcGlsZXIvcm9sbHVwVHlwZVNjcmlwdFBsdWdpbi50cyIsICJ0b29scy9jb21waWxlci9pbmxpbmUtY29uc3QtZW51bS90cmFuc2Zvcm0udHMiLCAidG9vbHMvY29tcGlsZXIvY29uc3QtZW51bS91dGlscy50cyIsICJ0b29scy9jb21waWxlci9jb25zdC1lbnVtL3RyYW5zZm9ybS50cyIsICJ0b29scy9jb21waWxlci9tYW5nbGVyL3RyYW5zZm9ybWVyLnRzIiwgInRvb2xzL2NvbXBpbGVyL21hbmdsZXIvZXhwb3J0cy1zeW1ib2wtdHJlZS50cyIsICJ0b29scy9jb21waWxlci9tYW5nbGVyL3R5cGVzY3JpcHQtaGVscGVycy50cyIsICJ0b29scy9hZHZ6aXAudHMiLCAidG9vbHMvZXRjLnRzIiwgInRvb2xzL3JvYWRyb2xsZXIudHMiLCAidG9vbHMvdXRpbHMudHMiXSwKICAic291cmNlUm9vdCI6ICJmaWxlOi8vL0Q6L2NvZGUvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvIiwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9jb2RlL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL3ZpdGUuY29uZmlnLnRzXCI7aW1wb3J0IHsgZGVmaW5lQ29uZmlnLCBub3JtYWxpemVQYXRoLCBUZXJzZXIgfSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW4gfSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuaW1wb3J0IHVybCBmcm9tIFwibm9kZTp1cmxcIjtcbmltcG9ydCB7IGJ1aWxkSW5kZXhNb2R1bGVOZXcgfSBmcm9tIFwiLi90b29scy9jb21waWxlci9jb21waWxlclwiO1xuaW1wb3J0IHsgYWR2emlwUGx1Z2luIH0gZnJvbSBcIi4vdG9vbHMvYWR2emlwXCI7XG5pbXBvcnQgeyBlY3RQbHVnaW4gfSBmcm9tIFwiLi90b29scy9ldGNcIjtcbmltcG9ydCB7IHJvYWRyb2xsZXJQbHVnaW4gfSBmcm9tIFwiLi90b29scy9yb2Fkcm9sbGVyXCI7XG5cbmNvbnN0IGdldFRlcnNlck9wdGlvbnMgPSAoY29tbWFuZDogc3RyaW5nKTogVGVyc2VyLk1pbmlmeU9wdGlvbnMgPT4ge1xuICBpZiAoY29tbWFuZCA9PT0gXCJidWlsZFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVjbWE6IDIwMjAsXG4gICAgICBtb2R1bGU6IHRydWUsXG4gICAgICB0b3BsZXZlbDogdHJ1ZSxcbiAgICAgIHBhcnNlOiB7XG4gICAgICAgIGh0bWw1X2NvbW1lbnRzOiBmYWxzZSxcbiAgICAgICAgc2hlYmFuZzogZmFsc2UsXG4gICAgICB9LFxuICAgICAgZm9ybWF0OiB7XG4gICAgICAgIGNvbW1lbnRzOiBmYWxzZSxcbiAgICAgICAgc2hlYmFuZzogZmFsc2UsXG4gICAgICAgIGFzY2lpX29ubHk6IHRydWUsXG4gICAgICAgIHF1b3RlX3N0eWxlOiAxLFxuICAgICAgICAvLyBrZWVwX251bWJlcnM6IHRydWUsXG4gICAgICB9LFxuICAgICAgY29tcHJlc3M6IHtcbiAgICAgICAgZGVhZF9jb2RlOiB0cnVlLFxuICAgICAgICBkcm9wX2RlYnVnZ2VyOiB0cnVlLFxuICAgICAgICBkcm9wX2NvbnNvbGU6IHRydWUsXG4gICAgICAgIHNlcXVlbmNlczogMTAwMDAwMCxcbiAgICAgICAgcGFzc2VzOiAxMDAwMDAwLFxuICAgICAgICBpbmxpbmU6IDMsXG4gICAgICAgIHB1cmVfbmV3OiB0cnVlLFxuICAgICAgICBwdXJlX2dldHRlcnM6IHRydWUsXG4gICAgICAgIC8vIHVuc2FmZTogdHJ1ZSxcbiAgICAgICAgdW5zYWZlX2Fycm93czogdHJ1ZSxcbiAgICAgICAgdW5zYWZlX2NvbXBzOiB0cnVlLFxuICAgICAgICB1bnNhZmVfbWF0aDogdHJ1ZSxcbiAgICAgICAgLy8gY29tcGFyaXNvbnM6IHRydWUsXG4gICAgICAgIGV4cHJlc3Npb246IHRydWUsXG4gICAgICAgIGhvaXN0X2Z1bnM6IHRydWUsXG4gICAgICAgIGhvaXN0X3ZhcnM6IGZhbHNlLFxuICAgICAgICB0b3BsZXZlbDogdHJ1ZSxcbiAgICAgICAgbW9kdWxlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG1hbmdsZToge1xuICAgICAgICBtb2R1bGU6IHRydWUsXG4gICAgICAgIHRvcGxldmVsOiB0cnVlLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAga2VlcF9xdW90ZWQ6IFwic3RyaWN0XCIsXG4gICAgICAgICAgcmVnZXg6IC9eXyhwcml2YXRlfGludGVybmFsKV8vLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59O1xuXG4vLyByZXdyaXRlIC8gYXMgaW5kZXguaHRtbFxuY29uc3QgcmV3cml0ZVNsYXNoVG9JbmRleEh0bWwgPSAoKTogUGx1Z2luID0+IHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcInJld3JpdGUtc2xhc2gtdG8taW5kZXgtaHRtbFwiLFxuICAgIGFwcGx5OiBcInNlcnZlXCIsXG4gICAgZW5mb3JjZTogXCJwb3N0XCIsXG4gICAgY29uZmlndXJlU2VydmVyOiAoc2VydmVyKSA9PiB7XG4gICAgICBzZXJ2ZXIubWlkZGxld2FyZXMudXNlKFwiL1wiLCAocmVxLCBfLCBuZXh0KSA9PiB7XG4gICAgICAgIGlmIChyZXEudXJsID09PSBcIi9cIikge1xuICAgICAgICAgIHJlcS51cmwgPSBcIi9pbmRleC5odG1sXCI7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn07XG5cbmNvbnN0IGdldERlZmluZXMgPSAoY29tbWFuZDogc3RyaW5nLCBtb2RlOiBzdHJpbmcsIGJ1aWxkRm9yUHJvZDogYm9vbGVhbikgPT4gKHtcbiAgX19CVUlMRF9GT1JfUFJPRF9fOiBKU09OLnN0cmluZ2lmeShidWlsZEZvclByb2QpLFxuICBfX0JVSUxEX0ZPUl9ERVZfXzogSlNPTi5zdHJpbmdpZnkoIWJ1aWxkRm9yUHJvZCksXG4gIF9fTE9DQUxfREVWX1NFUlZFUl9fOiBKU09OLnN0cmluZ2lmeShjb21tYW5kICE9PSBcImJ1aWxkXCIpLFxuICBfX0RFQlVHX01PREVfXzogSlNPTi5zdHJpbmdpZnkoY29tbWFuZCAhPT0gXCJidWlsZFwiICYmIG1vZGUgPT09IFwiZGV2ZWxvcG1lbnRcIiksXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgKHsgY29tbWFuZCwgbW9kZSB9KSA9PiB7XG4gIGNvbnN0IGJ1aWxkRm9yUHJvZCA9IHByb2Nlc3MuZW52LkJVSUxEX0ZPUiA9PT0gXCJwcm9kdWN0aW9uXCI7XG5cbiAgcmV0dXJuIGRlZmluZUNvbmZpZyh7XG4gICAgYmFzZTogXCIuL1wiLFxuICAgIGFwcFR5cGU6IFwibXBhXCIsXG4gICAgYnVpbGQ6IHtcbiAgICAgIHRhcmdldDogXCJlc25leHRcIixcbiAgICAgIG1pbmlmeTogXCJ0ZXJzZXJcIixcbiAgICAgIHRlcnNlck9wdGlvbnM6IGdldFRlcnNlck9wdGlvbnMoY29tbWFuZCksXG4gICAgICBhc3NldHNJbmxpbmVMaW1pdDogMCxcbiAgICAgIGFzc2V0c0RpcjogXCJcIixcbiAgICAgIHJlcG9ydENvbXByZXNzZWRTaXplOiBmYWxzZSxcbiAgICAgIG1vZHVsZVByZWxvYWQ6IGZhbHNlLFxuICAgICAgc291cmNlbWFwOiBmYWxzZSxcbiAgICAgIGVtcHR5T3V0RGlyOiB0cnVlLFxuICAgICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICBhc3NldEZpbGVOYW1lczogXCJbbmFtZV0uW2V4dF1cIixcbiAgICAgICAgICBlbnRyeUZpbGVOYW1lczogXCJpLmpzXCIsXG4gICAgICAgICAgY2h1bmtGaWxlTmFtZXM6IFwiW25hbWVdLltleHRdXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VydmVyOiB7XG4gICAgICBwb3J0OiA4MDgwLFxuICAgICAgb3BlbjogdHJ1ZSxcbiAgICAgIC8vIGhlYWRlcnM6IHtcbiAgICAgIC8vIFwiQ3Jvc3MtT3JpZ2luLU9wZW5lci1Qb2xpY3lcIjogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgLy8gXCJDcm9zcy1PcmlnaW4tRW1iZWRkZXItUG9saWN5XCI6IFwicmVxdWlyZS1jb3JwXCIsXG4gICAgICAvLyB9LFxuICAgICAgaG1yOiB0cnVlLFxuICAgICAgd2F0Y2g6IHtcbiAgICAgICAgaWdub3JlZDogKHApID0+IHtcbiAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBwYXRoLnJlbGF0aXZlKFxuICAgICAgICAgICAgcGF0aC5yZXNvbHZlKHVybC5maWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCksIFwiLi5cIiksXG4gICAgICAgICAgICBwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplUGF0aChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGggIT09IFwiXCIgJiZcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aCAhPT0gXCJzcmNcIiAmJlxuICAgICAgICAgICAgIW5vcm0uc3RhcnRzV2l0aChcInNyYy9cIikgJiZcbiAgICAgICAgICAgICFub3JtLnN0YXJ0c1dpdGgoXCJwdWJsaWMvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwdWJsaWNEaXI6IGZhbHNlLFxuICAgIC8vIGFzc2V0c0luY2x1ZGU6IFtcImxpYnMtYnVuZGxlLmpzXCJdLFxuICAgIHBsdWdpbnM6IFtcbiAgICAgIC8vIHBvc3RQcm9jZXNzSHRtbCgpLFxuICAgICAgcmV3cml0ZVNsYXNoVG9JbmRleEh0bWwoKSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJidWlsZC1nYW1lXCIsXG4gICAgICAgIGxvYWQ6IGFzeW5jIChpZCkgPT4ge1xuICAgICAgICAgIGlmIChpZC5lbmRzV2l0aChcIi9zcmMvaW5kZXgudHNcIikgJiYgY29tbWFuZCA9PT0gXCJidWlsZFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oXCJQUkUtQlVJTEQgRU5UUlkgUE9JTlQhXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGJ1aWxkSW5kZXhNb2R1bGVOZXcoXG4gICAgICAgICAgICAgIFwiLi9zcmMvaW5kZXgudHNcIixcbiAgICAgICAgICAgICAgXCIuL3NyYy9pbmRleC5qc1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0gc2F0aXNmaWVzIFBsdWdpbixcbiAgICAgIHByb2Nlc3MuZW52LlpJUCAmJiBlY3RQbHVnaW4oKSxcbiAgICAgIHByb2Nlc3MuZW52LlpJUCAmJiBhZHZ6aXBQbHVnaW4oKSxcbiAgICAgIHJvYWRyb2xsZXJQbHVnaW4oKSxcbiAgICBdLFxuICAgIGRlZmluZTogZ2V0RGVmaW5lcyhjb21tYW5kLCBtb2RlLCBidWlsZEZvclByb2QpLFxuICB9KTtcbn07XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcY29tcGlsZXIudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Q6L2NvZGUvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvdG9vbHMvY29tcGlsZXIvY29tcGlsZXIudHNcIjtpbXBvcnQge1xuICByb2xsdXAsXG4gIHR5cGUgT3V0cHV0T3B0aW9ucyxcbiAgdHlwZSBSb2xsdXBCdWlsZCxcbiAgdHlwZSBSb2xsdXBPcHRpb25zLFxufSBmcm9tIFwicm9sbHVwXCI7XG5pbXBvcnQgeyBidWlsZCBhcyBlc2J1aWxkIH0gZnJvbSBcImVzYnVpbGRcIjtcbmltcG9ydCB7IHJvbGx1cFR5cGVTY3JpcHRQbHVnaW4gfSBmcm9tIFwiLi9yb2xsdXBUeXBlU2NyaXB0UGx1Z2luXCI7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcIm5vZGU6ZnNcIjtcblxuZXhwb3J0IGNvbnN0IGJ1aWxkSW5kZXhNb2R1bGVOZXcgPSBhc3luYyAoaW5wdXQ6IHN0cmluZywgb3V0ZmlsZTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGxvZ3M6IGFueVtdID0gW107XG4gIC8vIHNlZSBiZWxvdyBmb3IgZGV0YWlscyBvbiB0aGVzZSBvcHRpb25zXG4gIGNvbnN0IGlucHV0T3B0aW9uczogUm9sbHVwT3B0aW9ucyA9IHtcbiAgICBpbnB1dCxcbiAgICBleHRlcm5hbDogW10sXG4gICAgcGx1Z2luczogW1xuICAgICAgLy8gbm9kZVJlc29sdmUoe30pLFxuICAgICAgLy8gZ2xzbGlmeSgpLFxuICAgICAgLy8ganNvbigpLFxuICAgICAgcm9sbHVwVHlwZVNjcmlwdFBsdWdpbihpbnB1dCksXG4gICAgXSxcbiAgICBsb2dMZXZlbDogXCJkZWJ1Z1wiLFxuICAgIG9uTG9nOiAobG9nKSA9PiB7XG4gICAgICBsb2dzLnB1c2gobG9nKTtcbiAgICB9LFxuICB9O1xuICBsZXQgYnVuZGxlOiBSb2xsdXBCdWlsZCB8IHVuZGVmaW5lZDtcbiAgbGV0IGJ1aWxkRmFpbGVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgLy8gQ3JlYXRlIGEgYnVuZGxlLiBJZiB5b3UgYXJlIHVzaW5nIFR5cGVTY3JpcHQgb3IgYSBydW50aW1lIHRoYXRcbiAgICAvLyBzdXBwb3J0cyBpdCwgeW91IGNhbiB3cml0ZVxuICAgIC8vXG4gICAgLy8gYXdhaXQgdXNpbmcgYnVuZGxlID0gYXdhaXQgcm9sbHVwKGlucHV0T3B0aW9ucyk7XG4gICAgLy9cbiAgICAvLyBpbnN0ZWFkIGFuZCBkbyBub3QgbmVlZCB0byBjbG9zZSB0aGUgYnVuZGxlIGV4cGxpY2l0bHkgYmVsb3cuXG4gICAgYnVuZGxlID0gYXdhaXQgcm9sbHVwKGlucHV0T3B0aW9ucyk7XG4gICAgY29uc29sZS5pbmZvKFwiY291bnQgcm9sbHVwIGxvZ3M6XCIsIGxvZ3MubGVuZ3RoKTtcbiAgICAvLyBmb3IgKGNvbnN0IGxvZyBvZiBsb2dzKSB7XG4gICAgLy8gICBjb25zb2xlLnRyYWNlKGxvZyk7XG4gICAgLy8gfVxuXG4gICAgYXdhaXQgZ2VuZXJhdGVPdXRwdXRzKGJ1bmRsZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgYnVpbGRGYWlsZWQgPSB0cnVlO1xuICAgIC8vIGRvIHNvbWUgZXJyb3IgcmVwb3J0aW5nXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKGJ1bmRsZSkge1xuICAgIC8vIGNsb3NlcyB0aGUgYnVuZGxlXG4gICAgYXdhaXQgYnVuZGxlLmNsb3NlKCk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgcG9zdEJ1aWxkKG91dGZpbGUpO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVPdXRwdXRzKGJ1bmRsZTogUm9sbHVwQnVpbGQpIHtcbiAgLy8geW91IGNhbiBjcmVhdGUgbXVsdGlwbGUgb3V0cHV0cyBmcm9tIHRoZSBzYW1lIGlucHV0IHRvIGdlbmVyYXRlIGUuZy5cbiAgLy8gZGlmZmVyZW50IGZvcm1hdHMgbGlrZSBDb21tb25KUyBhbmQgRVNNXG4gIGNvbnN0IG91dHB1dE9wdGlvbnNMaXN0OiBPdXRwdXRPcHRpb25zW10gPSBbXG4gICAge1xuICAgICAgZmlsZTogXCJidWlsZC9pbmRleC5qc1wiLFxuICAgICAgZm9ybWF0OiBcImVzXCIsXG4gICAgICBzb3VyY2VtYXA6IHRydWUsXG4gICAgfSxcbiAgXTtcbiAgZm9yIChjb25zdCBvdXRwdXRPcHRpb25zIG9mIG91dHB1dE9wdGlvbnNMaXN0KSB7XG4gICAgYXdhaXQgYnVuZGxlLndyaXRlKG91dHB1dE9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBwb3N0QnVpbGQgPSBhc3luYyAob3V0ZmlsZTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVzYnVpbGQoe1xuICAgIHdyaXRlOiBmYWxzZSxcbiAgICBvdXRmaWxlOiBvdXRmaWxlLFxuICAgIGVudHJ5UG9pbnRzOiBbXCIuL2J1aWxkL2luZGV4LmpzXCJdLFxuICAgIGNoYXJzZXQ6IFwiYXNjaWlcIixcbiAgICBtYW5nbGVQcm9wczogL15fKHByaXZhdGV8aW50ZXJuYWwpXy8sXG4gICAgLy8gbWFuZ2xlUXVvdGVkOiBmYWxzZSxcbiAgICBtaW5pZnlXaGl0ZXNwYWNlOiB0cnVlLFxuICAgIG1pbmlmeUlkZW50aWZpZXJzOiB0cnVlLFxuICAgIG1pbmlmeVN5bnRheDogdHJ1ZSxcbiAgICBtaW5pZnk6IHRydWUsXG4gICAgdHJlZVNoYWtpbmc6IHRydWUsXG4gICAgLy8gZGVmaW5lOiBkZWZpbmVzLFxuICAgIGRyb3A6IFtcImRlYnVnZ2VyXCIsIFwiY29uc29sZVwiXSxcbiAgICBsZWdhbENvbW1lbnRzOiBcIm5vbmVcIixcbiAgICBrZWVwTmFtZXM6IGZhbHNlLFxuICAgIHBsYXRmb3JtOiBcImJyb3dzZXJcIixcbiAgICB0YXJnZXQ6IFtcImVzbmV4dFwiXSxcbiAgICBmb3JtYXQ6IFwiZXNtXCIsXG4gICAgYnVuZGxlOiB0cnVlLFxuICAgIHNvdXJjZW1hcDogXCJleHRlcm5hbFwiLFxuICB9KTtcblxuICBmb3IgKGNvbnN0IGVycm9yIG9mIHJlc3VsdC5lcnJvcnMpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRVJST1I6XCIsIGVycm9yLnRleHQpO1xuICB9XG5cbiAgZm9yIChjb25zdCB3YXJuaW5nIG9mIHJlc3VsdC53YXJuaW5ncykge1xuICAgIGNvbnNvbGUud2FybihcIldBUk46XCIsIHdhcm5pbmcudGV4dCk7XG4gIH1cblxuICBpZiAocmVzdWx0Lm91dHB1dEZpbGVzKSB7XG4gICAgbGV0IGNvZGUgPSBcIlwiO1xuICAgIGxldCBtYXAgPSBcInt9XCI7XG4gICAgZm9yIChjb25zdCBvdXRwdXRGaWxlIG9mIHJlc3VsdC5vdXRwdXRGaWxlcykge1xuICAgICAgaWYgKG91dHB1dEZpbGUucGF0aC5lbmRzV2l0aChcIi5qc1wiKSkge1xuICAgICAgICB3cml0ZUZpbGVTeW5jKFwiYnVpbGQvaW5kZXgtZXNidWlsZC5qc1wiLCBvdXRwdXRGaWxlLnRleHQpO1xuICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgXCJtb2R1bGU6IFwiICtcbiAgICAgICAgICAgIG91dHB1dEZpbGUucGF0aCArXG4gICAgICAgICAgICBcIiAoXCIgK1xuICAgICAgICAgICAgb3V0cHV0RmlsZS5jb250ZW50cy5ieXRlTGVuZ3RoICtcbiAgICAgICAgICAgIFwiKVwiXG4gICAgICAgICk7XG4gICAgICAgIGNvZGUgPSBvdXRwdXRGaWxlLnRleHQ7XG4gICAgICB9IGVsc2UgaWYgKG91dHB1dEZpbGUucGF0aC5lbmRzV2l0aChcIi5qcy5tYXBcIikpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFxuICAgICAgICAgIFwic291cmNlbWFwOiBcIiArXG4gICAgICAgICAgICBvdXRwdXRGaWxlLnBhdGggK1xuICAgICAgICAgICAgXCIgKFwiICtcbiAgICAgICAgICAgIG91dHB1dEZpbGUuY29udGVudHMuYnl0ZUxlbmd0aCArXG4gICAgICAgICAgICBcIilcIlxuICAgICAgICApO1xuICAgICAgICBtYXAgPSBvdXRwdXRGaWxlLnRleHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgbWFwOiBKU09OLnBhcnNlKG1hcCksXG4gICAgfTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJmYXRhbCBidWlsZCBlcnJvclwiKTtcbn07XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxccm9sbHVwVHlwZVNjcmlwdFBsdWdpbi50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9jb21waWxlci9yb2xsdXBUeXBlU2NyaXB0UGx1Z2luLnRzXCI7aW1wb3J0IHR5cGVzY3JpcHQgZnJvbSBcIkByb2xsdXAvcGx1Z2luLXR5cGVzY3JpcHRcIjtcbmltcG9ydCB7IHRzSW5saW5lQ29uc3RFbnVtcyB9IGZyb20gXCIuL2lubGluZS1jb25zdC1lbnVtL3RyYW5zZm9ybVwiO1xuaW1wb3J0IHsgdHNPcHRpbWl6ZUNvbnN0RW51bXMgfSBmcm9tIFwiLi9jb25zdC1lbnVtL3RyYW5zZm9ybVwiO1xuaW1wb3J0IHsgcHJvcGVydGllc1JlbmFtZVRyYW5zZm9ybWVyIH0gZnJvbSBcIi4vbWFuZ2xlci90cmFuc2Zvcm1lclwiO1xuXG5leHBvcnQgY29uc3Qgcm9sbHVwVHlwZVNjcmlwdFBsdWdpbiA9IChpbnB1dDogc3RyaW5nKSA9PlxuICB0eXBlc2NyaXB0KHtcbiAgICB0c2NvbmZpZzogXCJzcmMvdHNjb25maWcuanNvblwiLFxuICAgIHRyYW5zZm9ybWVyczogKHByb2dyYW0pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJlZm9yZTogW1xuICAgICAgICAgIHRzSW5saW5lQ29uc3RFbnVtcyhwcm9ncmFtKSxcbiAgICAgICAgICB0c09wdGltaXplQ29uc3RFbnVtcyhwcm9ncmFtKSxcbiAgICAgICAgICBwcm9wZXJ0aWVzUmVuYW1lVHJhbnNmb3JtZXIocHJvZ3JhbSwge1xuICAgICAgICAgICAgZW50cnlTb3VyY2VGaWxlczogW2lucHV0XSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSxcbiAgICAgICAgYWZ0ZXI6IFtdLFxuICAgICAgICBhZnRlckRlY2xhcmF0aW9uczogW1xuICAgICAgICAgIC8vdHNPcHRpbWl6ZUNvbnN0RW51bXMocHJvZ3JhbSlcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSk7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcaW5saW5lLWNvbnN0LWVudW1cIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcaW5saW5lLWNvbnN0LWVudW1cXFxcdHJhbnNmb3JtLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9jb2RlL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL3Rvb2xzL2NvbXBpbGVyL2lubGluZS1jb25zdC1lbnVtL3RyYW5zZm9ybS50c1wiO2ltcG9ydCB0cyBmcm9tIFwidHlwZXNjcmlwdFwiO1xuaW1wb3J0IHsgZXZhbHVhdGUgfSBmcm9tIFwiLi4vY29uc3QtZW51bS91dGlsc1wiO1xuXG5leHBvcnQgY29uc3QgdHNJbmxpbmVDb25zdEVudW1zID0gKHByb2dyYW06IHRzLlByb2dyYW0pID0+IHtcbiAgY29uc3QgdHlwZUNoZWNrZXIgPSBwcm9ncmFtLmdldFR5cGVDaGVja2VyKCk7XG4gIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGVBbmRDaGlsZHJlbihub2RlOiB0cy5Tb3VyY2VGaWxlLCBjdHg6IHRzLlRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IHRzLlNvdXJjZUZpbGU7XG4gIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGVBbmRDaGlsZHJlbihub2RlOiB0cy5Ob2RlLCBjdHg6IHRzLlRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IHRzLk5vZGU7XG4gIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGVBbmRDaGlsZHJlbihub2RlOiB0cy5Ob2RlLCBjdHg6IHRzLlRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IHRzLk5vZGUge1xuICAgIHJldHVybiB0cy52aXNpdEVhY2hDaGlsZChcbiAgICAgIHRyYW5zZm9ybU5vZGUobm9kZSksXG4gICAgICAoY2hpbGROb2RlOiB0cy5Ob2RlKSA9PiB0cmFuc2Zvcm1Ob2RlQW5kQ2hpbGRyZW4oY2hpbGROb2RlLCBjdHgpLFxuICAgICAgY3R4LFxuICAgICk7XG4gIH1cbiAgZnVuY3Rpb24gdHJhbnNmb3JtTm9kZShub2RlOiB0cy5Ob2RlKTogdHMuTm9kZSB7XG4gICAgaWYgKHRzLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICBjb25zdCB0cDIgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihub2RlLmV4cHJlc3Npb24pO1xuICAgICAgaWYgKHRwMiAmJiB0cDIuc3ltYm9sICYmIHRwMi5zeW1ib2wuZmxhZ3MgJiB0cy5TeW1ib2xGbGFncy5Db25zdEVudW0pIHtcbiAgICAgICAgLy8gY29uc29sZS5pbmZvKFwiQ09OU1QgRU5VTSFcIik7XG4gICAgICAgIGNvbnN0IHRwID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24obm9kZS5uYW1lKTtcbiAgICAgICAgaWYgKHRwICYmIHRwLnN5bWJvbCkge1xuICAgICAgICAgIGlmICh0cC5zeW1ib2wuZmxhZ3MgJiB0cy5TeW1ib2xGbGFncy5FbnVtTWVtYmVyKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oXCJDT05TVCBNRU1CRVIhXCIpO1xuICAgICAgICAgICAgaWYgKHRwLnN5bWJvbC52YWx1ZURlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgICAgIGlmICh0cy5pc0VudW1NZW1iZXIodHAuc3ltYm9sLnZhbHVlRGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdCA9IHRwLnN5bWJvbC52YWx1ZURlY2xhcmF0aW9uPy5pbml0aWFsaXplcjtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Tm9kZSA9IGdldENvbnN0YW50VmFsdWUoaW5pdCk7XG4gICAgICAgICAgICAgICAgICBpZiAobmV3Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oXCJJTkxJTkUgXCIgKyBub2RlLmdldFRleHQoKSArIFwiID0+IFwiICsgaW5pdC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImZhaWxlZCB0byBjcmVhdGUgaW5pdGlhbGl6ZXIgZm9yIFwiLCBpbml0LmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIm1pc3MgaW5pdGlhbGl6ZXIgZm9yIFwiLCBub2RlLmdldFRleHQoKSk7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmluZm8odHAuc3ltYm9sLnZhbHVlRGVjbGFyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwic2FzZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gKGN0eDogdHMuVHJhbnNmb3JtYXRpb25Db250ZXh0KSA9PiB7XG4gICAgcmV0dXJuIChzb3VyY2VGaWxlOiB0cy5Tb3VyY2VGaWxlKSA9PiB0cmFuc2Zvcm1Ob2RlQW5kQ2hpbGRyZW4oc291cmNlRmlsZSwgY3R4KTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGdldENvbnN0YW50VmFsdWUoZXhwcmVzc2lvbjogdHMuRXhwcmVzc2lvbiB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLy8gY2FzZTogLXhcbiAgaWYgKHRzLmlzUHJlZml4VW5hcnlFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgcmV0dXJuIHRzLmZhY3RvcnkuY3JlYXRlUHJlZml4VW5hcnlFeHByZXNzaW9uKGV4cHJlc3Npb24ub3BlcmF0b3IsIGdldENvbnN0YW50VmFsdWUoZXhwcmVzc2lvbi5vcGVyYW5kKSk7XG4gIH0gZWxzZSBpZiAodHMuaXNTdHJpbmdMaXRlcmFsTGlrZShleHByZXNzaW9uKSkge1xuICAgIHJldHVybiB0cy5mYWN0b3J5LmNyZWF0ZVN0cmluZ0xpdGVyYWwoZXhwcmVzc2lvbi50ZXh0KTtcbiAgfSBlbHNlIGlmICh0cy5pc051bWVyaWNMaXRlcmFsKGV4cHJlc3Npb24pKSB7XG4gICAgcmV0dXJuIHRzLmZhY3RvcnkuY3JlYXRlTnVtZXJpY0xpdGVyYWwoZXhwcmVzc2lvbi50ZXh0KTtcbiAgfSBlbHNlIGlmIChcbiAgICBleHByZXNzaW9uLmtpbmQgPT09IHRzLlN5bnRheEtpbmQuVHJ1ZUtleXdvcmQgfHxcbiAgICBleHByZXNzaW9uLmtpbmQgPT09IHRzLlN5bnRheEtpbmQuRmFsc2VLZXl3b3JkIHx8XG4gICAgZXhwcmVzc2lvbi5raW5kID09PSB0cy5TeW50YXhLaW5kLk51bGxLZXl3b3JkXG4gICkge1xuICAgIHJldHVybiB0cy5mYWN0b3J5LmNyZWF0ZVRva2VuKGV4cHJlc3Npb24ua2luZCk7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGV2YWx1YXRlKGV4cHJlc3Npb24sIG5ldyBNYXAoKSk7XG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdHMuZmFjdG9yeS5jcmVhdGVTdHJpbmdMaXRlcmFsKHJlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHRzLmZhY3RvcnkuY3JlYXRlTnVtZXJpY0xpdGVyYWwocmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaWdub3JlXG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXHRvb2xzXFxcXGNvbXBpbGVyXFxcXGNvbnN0LWVudW1cIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcY29uc3QtZW51bVxcXFx1dGlscy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9jb21waWxlci9jb25zdC1lbnVtL3V0aWxzLnRzXCI7aW1wb3J0IHRzIGZyb20gXCJ0eXBlc2NyaXB0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZShleHByOiB0cy5FeHByZXNzaW9uLCBrbm93bjogTWFwPHN0cmluZywgbnVtYmVyIHwgc3RyaW5nPik6IHN0cmluZyB8IG51bWJlciB7XG4gIGlmICh0cy5pc1ByZWZpeFVuYXJ5RXhwcmVzc2lvbihleHByKSkge1xuICAgIGNvbnN0IHZhbHVlID0gZXZhbHVhdGUoZXhwci5vcGVyYW5kLCBrbm93bik7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgc3dpdGNoICgoZXhwciBhcyB0cy5QcmVmaXhVbmFyeUV4cHJlc3Npb24pLm9wZXJhdG9yKSB7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5QbHVzVG9rZW46XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuTWludXNUb2tlbjpcbiAgICAgICAgICByZXR1cm4gLXZhbHVlO1xuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuVGlsZGVUb2tlbjpcbiAgICAgICAgICByZXR1cm4gfnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0cy5pc0JpbmFyeUV4cHJlc3Npb24oZXhwcikpIHtcbiAgICBjb25zdCBsZWZ0ID0gZXZhbHVhdGUoZXhwci5sZWZ0LCBrbm93bik7XG4gICAgY29uc3QgcmlnaHQgPSBldmFsdWF0ZShleHByLnJpZ2h0LCBrbm93bik7XG4gICAgaWYgKHR5cGVvZiBsZWZ0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiByaWdodCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgc3dpdGNoIChleHByLm9wZXJhdG9yVG9rZW4ua2luZCkge1xuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuQmFyVG9rZW46XG4gICAgICAgICAgcmV0dXJuIGxlZnQgfCByaWdodDtcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLkFtcGVyc2FuZFRva2VuOlxuICAgICAgICAgIHJldHVybiBsZWZ0ICYgcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW46XG4gICAgICAgICAgcmV0dXJuIGxlZnQgPj4gcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5Ub2tlbjpcbiAgICAgICAgICByZXR1cm4gbGVmdCA+Pj4gcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5MZXNzVGhhbkxlc3NUaGFuVG9rZW46XG4gICAgICAgICAgcmV0dXJuIGxlZnQgPDwgcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5DYXJldFRva2VuOlxuICAgICAgICAgIHJldHVybiBsZWZ0IF4gcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5Bc3Rlcmlza1Rva2VuOlxuICAgICAgICAgIHJldHVybiBsZWZ0ICogcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5TbGFzaFRva2VuOlxuICAgICAgICAgIHJldHVybiBsZWZ0IC8gcmlnaHQ7XG4gICAgICAgIGNhc2UgdHMuU3ludGF4S2luZC5QbHVzVG9rZW46XG4gICAgICAgICAgcmV0dXJuIGxlZnQgKyByaWdodDtcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLk1pbnVzVG9rZW46XG4gICAgICAgICAgcmV0dXJuIGxlZnQgLSByaWdodDtcbiAgICAgICAgY2FzZSB0cy5TeW50YXhLaW5kLlBlcmNlbnRUb2tlbjpcbiAgICAgICAgICByZXR1cm4gbGVmdCAlIHJpZ2h0O1xuICAgICAgICBjYXNlIHRzLlN5bnRheEtpbmQuQXN0ZXJpc2tBc3Rlcmlza1Rva2VuOlxuICAgICAgICAgIHJldHVybiBsZWZ0ICoqIHJpZ2h0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2YgbGVmdCA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgdHlwZW9mIHJpZ2h0ID09PSBcInN0cmluZ1wiICYmXG4gICAgICBleHByLm9wZXJhdG9yVG9rZW4ua2luZCA9PT0gdHMuU3ludGF4S2luZC5QbHVzVG9rZW5cbiAgICApIHtcbiAgICAgIHJldHVybiBsZWZ0ICsgcmlnaHQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRzLmlzU3RyaW5nTGl0ZXJhbExpa2UoZXhwcikpIHtcbiAgICByZXR1cm4gZXhwci50ZXh0O1xuICB9IGVsc2UgaWYgKHRzLmlzTnVtZXJpY0xpdGVyYWwoZXhwcikpIHtcbiAgICByZXR1cm4gK2V4cHIudGV4dDtcbiAgfSBlbHNlIGlmICh0cy5pc1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGV4cHIpKSB7XG4gICAgcmV0dXJuIGV2YWx1YXRlKGV4cHIuZXhwcmVzc2lvbiwga25vd24pO1xuICB9IGVsc2UgaWYgKHRzLmlzSWRlbnRpZmllcihleHByKSkge1xuICAgIGNvbnN0IHZhbHVlID0ga25vd24uZ2V0KGV4cHIudGV4dCk7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGVudW0uIG11c3QgcmVmZXJlbmNlIHNlbGYgdmFsdWVcIik7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihcInVuZXhwZWN0ZWQgZXZhbHVhdGlvbiBmb3IgZW51bSBtZW1iZXI6IFwiICsgZXhwci5nZXRUZXh0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc01vZGlmaWVyKG5vZGU6IHRzLk5vZGUsIG1vZGlmaWVyOiB0cy5TeW50YXhLaW5kKSB7XG4gIHJldHVybiB0cy5jYW5IYXZlTW9kaWZpZXJzKG5vZGUpICYmIHRzLmdldE1vZGlmaWVycyhub2RlKT8uc29tZSgobW9kOiB0cy5Nb2RpZmllcikgPT4gbW9kLmtpbmQgPT09IG1vZGlmaWVyKTtcbn1cblxuY29uc3QgY2FjaGVkTmFtZXMgPSBuZXcgV2Vha01hcDx0cy5Tb3VyY2VGaWxlLCBzdHJpbmdbXT4oKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBvcnRlZE5hbWVzT2ZTb3VyY2UocHJvZ3JhbTogdHMuUHJvZ3JhbSwgc291cmNlRmlsZTogdHMuU291cmNlRmlsZSkge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZWROYW1lcy5nZXQoc291cmNlRmlsZSk7XG4gIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgY29uc3QgdHlwZUNoZWNrZXIgPSBwcm9ncmFtLmdldFR5cGVDaGVja2VyKCk7XG4gIGNvbnN0IHNvdXJjZVN5bWJvbCA9IHR5cGVDaGVja2VyLmdldFN5bWJvbEF0TG9jYXRpb24oc291cmNlRmlsZSk7XG4gIGxldCBuYW1lczogc3RyaW5nW107XG5cbiAgaWYgKHNvdXJjZVN5bWJvbCkge1xuICAgIG5hbWVzID0gdHlwZUNoZWNrZXIuZ2V0RXhwb3J0c09mTW9kdWxlKHNvdXJjZVN5bWJvbCkubWFwKChzKSA9PiB7XG4gICAgICBpZiAocy5mbGFncyAmIHRzLlN5bWJvbEZsYWdzLkFsaWFzKSB7XG4gICAgICAgIHJldHVybiB0eXBlQ2hlY2tlci5nZXRBbGlhc2VkU3ltYm9sKHMpLm5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gcy5uYW1lO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG5hbWVzID0gW107XG4gIH1cblxuICBjYWNoZWROYW1lcy5zZXQoc291cmNlRmlsZSwgbmFtZXMpO1xuICByZXR1cm4gbmFtZXM7XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcY29uc3QtZW51bVwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcY29kZVxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFx0b29sc1xcXFxjb21waWxlclxcXFxjb25zdC1lbnVtXFxcXHRyYW5zZm9ybS50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9jb21waWxlci9jb25zdC1lbnVtL3RyYW5zZm9ybS50c1wiO2ltcG9ydCB0cyBmcm9tIFwidHlwZXNjcmlwdFwiO1xuaW1wb3J0IHsgZXZhbHVhdGUsIGhhc01vZGlmaWVyIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGNvbnN0IHRzT3B0aW1pemVDb25zdEVudW1zID0gKHByb2dyYW06IHRzLlByb2dyYW0sIHBsdWdpbk9wdGlvbnM/OiB1bmtub3duKSA9PiB7XG4gIHJldHVybiAoY3R4OiB0cy5UcmFuc2Zvcm1hdGlvbkNvbnRleHQpID0+IHtcbiAgICByZXR1cm4gKHNvdXJjZUZpbGU6IHRzLlNvdXJjZUZpbGUpID0+IHtcbiAgICAgIHJldHVybiB0cy52aXNpdEVhY2hDaGlsZChzb3VyY2VGaWxlLCB2aXNpdG9yLCBjdHgpO1xuICAgICAgZnVuY3Rpb24gdmlzaXRvcihub2RlOiB0cy5Ob2RlKTogdHMuTm9kZSB7XG4gICAgICAgIGlmICghdHMuaXNFbnVtRGVjbGFyYXRpb24obm9kZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHMudmlzaXRFYWNoQ2hpbGQobm9kZSwgdmlzaXRvciwgY3R4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGFzTW9kaWZpZXIobm9kZSwgdHMuU3ludGF4S2luZC5Db25zdEtleXdvcmQpKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAoIWhhc01vZGlmaWVyKG5vZGUsIHRzLlN5bnRheEtpbmQuRXhwb3J0S2V5d29yZCkpIHtcbiAgICAgICAgLy8gICBjb25zdCBleHBvcnRlZE5hbWVzID0gZ2V0RXhwb3J0ZWROYW1lc09mU291cmNlKHByb2dyYW0sIHNvdXJjZUZpbGUpO1xuXG4gICAgICAgIC8vICAgaWYgKCFleHBvcnRlZE5hbWVzLmluY2x1ZGVzKG5vZGUubmFtZS50ZXh0KSkge1xuICAgICAgICAvLyAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYgKHNvdXJjZUZpbGUuaXNEZWNsYXJhdGlvbkZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gdHMudmlzaXRFYWNoQ2hpbGQobm9kZSwgc3RyaXBDb25zdEtleXdvcmQsIGN0eCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtRW51bShub2RlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHN0cmlwQ29uc3RLZXl3b3JkKG5vZGU6IHRzLk5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5raW5kID09PSB0cy5TeW50YXhLaW5kLkNvbnN0S2V5d29yZCA/IHVuZGVmaW5lZCA6IG5vZGU7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2Zvcm1FbnVtKG5vZGU6IHRzLkVudW1EZWNsYXJhdGlvbikge1xuICAgIGNvbnN0IG1lbWJlcnMgPSBub2RlLm1lbWJlcnM7XG4gICAgY29uc3Qga25vd24gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyIHwgc3RyaW5nPigpO1xuICAgIGNvbnN0IHByb3BlcnRpZXM6IHRzLlByb3BlcnR5QXNzaWdubWVudFtdID0gW107XG4gICAgbGV0IGxhc3RWYWx1ZTogc3RyaW5nIHwgbnVtYmVyID0gLTE7XG5cbiAgICBmb3IgKGNvbnN0IG1lbWJlciBvZiBtZW1iZXJzKSB7XG4gICAgICBpZiAoIW1lbWJlci5uYW1lKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0cy5pc0lkZW50aWZpZXIobWVtYmVyLm5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBuYW1lIG9mIGVudW0gbWVtYmVyIG11c3QgYmUgYW4gaWRlbnRpZmllclwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBtZW1iZXIubmFtZS50ZXh0O1xuICAgICAgbGV0IHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XG4gICAgICBsZXQgdmFsdWVFeHByOiB0cy5FeHByZXNzaW9uO1xuXG4gICAgICBpZiAobWVtYmVyLmluaXRpYWxpemVyKSB7XG4gICAgICAgIHZhbHVlID0gZXZhbHVhdGUobWVtYmVyLmluaXRpYWxpemVyLCBrbm93bik7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHZhbHVlRXhwciA9XG4gICAgICAgICAgICB2YWx1ZSA+PSAwXG4gICAgICAgICAgICAgID8gdHMuZmFjdG9yeS5jcmVhdGVOdW1lcmljTGl0ZXJhbCh2YWx1ZSlcbiAgICAgICAgICAgICAgOiB0cy5mYWN0b3J5LmNyZWF0ZVByZWZpeFVuYXJ5RXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICAgIHRzLlN5bnRheEtpbmQuTWludXNUb2tlbixcbiAgICAgICAgICAgICAgICAgIHRzLmZhY3RvcnkuY3JlYXRlTnVtZXJpY0xpdGVyYWwoLXZhbHVlKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHZhbHVlRXhwciA9IHRzLmZhY3RvcnkuY3JlYXRlU3RyaW5nTGl0ZXJhbCh2YWx1ZSk7XG4gICAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBtZW1iZXIgdmFsdWVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIGxhc3RWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZW51bVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogbGFzdCBrbm93biB2YWx1ZSsxXG4gICAgICAgICAqIGVudW0gTXlFbnVtIHtcbiAgICAgICAgICogICBBID0gNSxcbiAgICAgICAgICogICBCLCAvLyBpbXBsaWNpdCA2XG4gICAgICAgICAqICAgQywgLy8gaW1wbGljaXQgNyxcbiAgICAgICAgICogICBEID0gMTAwMCxcbiAgICAgICAgICogICBFLCAvLyBpbXBsaWNpdCAxMDAxXG4gICAgICAgICAqIH1cbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlID0gKytsYXN0VmFsdWU7XG4gICAgICAgIHZhbHVlRXhwciA9IHRzLmZhY3RvcnkuY3JlYXRlTnVtZXJpY0xpdGVyYWwodmFsdWUpO1xuICAgICAgfVxuICAgICAgY29uc3QgYXNzaWdubWVudCA9IHRzLmZhY3RvcnkuY3JlYXRlUHJvcGVydHlBc3NpZ25tZW50KG5hbWUsIHZhbHVlRXhwcik7XG4gICAgICB0cy5zZXRTb3VyY2VNYXBSYW5nZShhc3NpZ25tZW50LCB0cy5nZXRTb3VyY2VNYXBSYW5nZShtZW1iZXIpKTtcbiAgICAgIHByb3BlcnRpZXMucHVzaChhc3NpZ25tZW50KTtcbiAgICAgIGtub3duLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdHMuZmFjdG9yeS5jcmVhdGVWYXJpYWJsZVN0YXRlbWVudChcbiAgICAgIG5vZGUubW9kaWZpZXJzLFxuICAgICAgdHMuZmFjdG9yeS5jcmVhdGVWYXJpYWJsZURlY2xhcmF0aW9uTGlzdChcbiAgICAgICAgW1xuICAgICAgICAgIHRzLmZhY3RvcnkuY3JlYXRlVmFyaWFibGVEZWNsYXJhdGlvbihcbiAgICAgICAgICAgIG5vZGUubmFtZSxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRzLmZhY3RvcnkuY3JlYXRlQXNFeHByZXNzaW9uKFxuICAgICAgICAgICAgICB0cy5mYWN0b3J5LmNyZWF0ZU9iamVjdExpdGVyYWxFeHByZXNzaW9uKHByb3BlcnRpZXMsIHRydWUpLFxuICAgICAgICAgICAgICB0cy5mYWN0b3J5LmNyZWF0ZVR5cGVSZWZlcmVuY2VOb2RlKHRzLmZhY3RvcnkuY3JlYXRlSWRlbnRpZmllcihcImNvbnN0XCIpLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApLFxuICAgICAgICBdLFxuICAgICAgICB0cy5Ob2RlRmxhZ3MuQ29uc3QsXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0cy5zZXRTb3VyY2VNYXBSYW5nZShyZXN1bHQsIHRzLmdldFNvdXJjZU1hcFJhbmdlKG5vZGUpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXHRvb2xzXFxcXGNvbXBpbGVyXFxcXG1hbmdsZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcbWFuZ2xlclxcXFx0cmFuc2Zvcm1lci50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9jb21waWxlci9tYW5nbGVyL3RyYW5zZm9ybWVyLnRzXCI7aW1wb3J0IHRzIGZyb20gXCJ0eXBlc2NyaXB0XCI7XG5cbmltcG9ydCB7IEV4cG9ydHNTeW1ib2xUcmVlIH0gZnJvbSBcIi4vZXhwb3J0cy1zeW1ib2wtdHJlZVwiO1xuaW1wb3J0IHtcbiAgZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sLFxuICBnZXROb2RlSlNEb2NDb21tZW50LFxuICBpc0NsYXNzTWVtYmVyLFxuICBpc0NvbnN0cnVjdG9yUGFyYW1ldGVyLFxuICBpc05vZGVOYW1lZERlY2xhcmF0aW9uLFxuICBpc1ByaXZhdGVDbGFzc01lbWJlcixcbiAgaXNTeW1ib2xDbGFzc01lbWJlcixcbiAgc3BsaXRUcmFuc2llbnRTeW1ib2wsXG4gIGdldENsYXNzT2ZNZW1iZXJTeW1ib2wsXG4gIGhhc0RlY29yYXRvcnMsXG4gIGhhc01vZGlmaWVyLFxufSBmcm9tIFwiLi90eXBlc2NyaXB0LWhlbHBlcnNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSZW5hbWVPcHRpb25zIHtcbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIGVudHJ5IHNvdXJjZSBmaWxlcyB3aGljaCB3aWxsIHVzZWQgdG8gZGV0ZWN0IGV4cG9ydGVkIGFuZCBpbnRlcm5hbCBmaWVsZHMuXG4gICAqIEJhc2ljYWxseSBpdCBzaG91bGQgYmUgZW50cnkgcG9pbnQocykgb2YgdGhlIGxpYnJhcnkvcHJvamVjdC5cbiAgICogQGV4YW1wbGUgWycuL3NyYy9pbmRleC50cyddXG4gICAqL1xuICBlbnRyeVNvdXJjZUZpbGVzOiBzdHJpbmdbXTtcblxuICAvKipcbiAgICogUHJlZml4IG9mIGdlbmVyYXRlZCBuYW1lcyBmb3IgcHJpdmF0ZSBmaWVsZHNcbiAgICogQGV4YW1wbGUgJ19wcml2YXRlXycgLy8gZGVmYXVsdFxuICAgKiBAZXhhbXBsZSAnJHAkJ1xuICAgKi9cbiAgcHJpdmF0ZVByZWZpeDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcmVmaXggb2YgZ2VuZXJhdGVkIG5hbWVzIGZvciBpbnRlcm5hbCBmaWVsZHNcbiAgICogQGV4YW1wbGUgJ19pbnRlcm5hbF8nIC8vIGRlZmF1bHRcbiAgICogQGV4YW1wbGUgJyRpJCdcbiAgICovXG4gIGludGVybmFsUHJlZml4OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENvbW1lbnQgd2hpY2ggd2lsbCB0cmVhdCBhIGNsYXNzL2ludGVyZmFjZS90eXBlL3Byb3BlcnR5L2V0YyBhbmQgYWxsIGl0cyBjaGlsZHJlbiBhcyBcInB1YmxpY1wiLlxuICAgKiBTZXQgaXQgdG8gZW1wdHkgc3RyaW5nIHRvIGRpc2FibGUgdXNpbmcgSlNEb2MgY29tbWVudCB0byBkZXRlY3RpbmcgXCJ2aXNpYmlsaXR5IGxldmVsXCIuXG4gICAqIEBleGFtcGxlICdwdWJsaWMnIC8vIGRlZmF1bHRcbiAgICogQGV4YW1wbGUgJ2V4dGVybmFsJ1xuICAgKiBAZXhhbXBsZSAnJ1xuICAgKi9cbiAgcHVibGljSlNEb2NUYWc6IHN0cmluZztcblxuICAvKipcbiAgICogV2hldGhlciBmaWVsZHMgdGhhdCB3ZXJlIGRlY29yYXRlZCBzaG91bGQgYmUgcmVuYW1lZC5cbiAgICogQSBmaWVsZCBpcyB0cmVhdGVkIGFzIFwiZGVjb3JhdGVkXCIgaWYgaXRzZWxmIG9yIGFueSBpdHMgcGFyZW50IChvbiB0eXBlIGxldmVsKSBoYXMgYSBkZWNvcmF0b3IuXG4gICAqL1xuICBpZ25vcmVEZWNvcmF0ZWQ6IGJvb2xlYW47XG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBSZW5hbWVPcHRpb25zID0ge1xuICBlbnRyeVNvdXJjZUZpbGVzOiBbXSxcbiAgcHJpdmF0ZVByZWZpeDogXCJfcHJpdmF0ZV9cIixcbiAgaW50ZXJuYWxQcmVmaXg6IFwiX2ludGVybmFsX1wiLFxuICBwdWJsaWNKU0RvY1RhZzogXCJwdWJsaWNcIixcbiAgaWdub3JlRGVjb3JhdGVkOiBmYWxzZSxcbn07XG5cbmNvbnN0IGVudW0gVmlzaWJpbGl0eVR5cGUge1xuICBJbnRlcm5hbCxcbiAgUHJpdmF0ZSxcbiAgRXh0ZXJuYWwsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0aWVzUmVuYW1lVHJhbnNmb3JtZXIoXG4gIHByb2dyYW06IHRzLlByb2dyYW0sXG4gIGNvbmZpZz86IFBhcnRpYWw8UmVuYW1lT3B0aW9ucz4sXG4pOiB0cy5UcmFuc2Zvcm1lckZhY3Rvcnk8dHMuU291cmNlRmlsZT4ge1xuICByZXR1cm4gY3JlYXRlVHJhbnNmb3JtZXJGYWN0b3J5KHByb2dyYW0sIGNvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybWVyRmFjdG9yeShcbiAgcHJvZ3JhbTogdHMuUHJvZ3JhbSxcbiAgb3B0aW9ucz86IFBhcnRpYWw8UmVuYW1lT3B0aW9ucz4sXG4pOiB0cy5UcmFuc2Zvcm1lckZhY3Rvcnk8dHMuU291cmNlRmlsZT4ge1xuICBjb25zdCBmdWxsT3B0aW9uczogUmVuYW1lT3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgY29uc3QgdHlwZUNoZWNrZXIgPSBwcm9ncmFtLmdldFR5cGVDaGVja2VyKCk7XG4gIGNvbnN0IGV4cG9ydHNTeW1ib2xUcmVlID0gbmV3IEV4cG9ydHNTeW1ib2xUcmVlKHByb2dyYW0sIGZ1bGxPcHRpb25zLmVudHJ5U291cmNlRmlsZXMpO1xuXG4gIGNvbnN0IGNhY2hlID0gbmV3IE1hcDx0cy5TeW1ib2wsIFZpc2liaWxpdHlUeXBlPigpO1xuXG4gIGZ1bmN0aW9uIHB1dFRvQ2FjaGUobm9kZVN5bWJvbDogdHMuU3ltYm9sLCB2YWw6IFZpc2liaWxpdHlUeXBlKTogVmlzaWJpbGl0eVR5cGUge1xuICAgIGNhY2hlLnNldChub2RlU3ltYm9sLCB2YWwpO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICByZXR1cm4gKGNvbnRleHQ6IHRzLlRyYW5zZm9ybWF0aW9uQ29udGV4dCkgPT4ge1xuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGVBbmRDaGlsZHJlbihub2RlOiB0cy5Tb3VyY2VGaWxlLCBjdHg6IHRzLlRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IHRzLlNvdXJjZUZpbGU7XG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtTm9kZUFuZENoaWxkcmVuKG5vZGU6IHRzLk5vZGUsIGN0eDogdHMuVHJhbnNmb3JtYXRpb25Db250ZXh0KTogdHMuTm9kZTtcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlQW5kQ2hpbGRyZW4obm9kZTogdHMuTm9kZSwgY3R4OiB0cy5UcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiB0cy5Ob2RlIHtcbiAgICAgIHJldHVybiB0cy52aXNpdEVhY2hDaGlsZChcbiAgICAgICAgdHJhbnNmb3JtTm9kZShub2RlKSxcbiAgICAgICAgKGNoaWxkTm9kZTogdHMuTm9kZSkgPT4gdHJhbnNmb3JtTm9kZUFuZENoaWxkcmVuKGNoaWxkTm9kZSwgY3R4KSxcbiAgICAgICAgY3R4LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybU5vZGUobm9kZTogdHMuTm9kZSk6IHRzLk5vZGUge1xuICAgICAgLy8gY29uc3QgYSA9IHsgbm9kZSB9XG4gICAgICBpZiAodHMuaXNTaG9ydGhhbmRQcm9wZXJ0eUFzc2lnbm1lbnQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVNob3J0aGFuZFByb3BlcnR5QXNzaWdubWVudChub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gY29uc3QgeyBub2RlIH0gPSBvYmo7XG4gICAgICBpZiAodHMuaXNCaW5kaW5nRWxlbWVudChub2RlKSAmJiBub2RlLnByb3BlcnR5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHRzLmlzT2JqZWN0QmluZGluZ1BhdHRlcm4obm9kZS5wYXJlbnQpKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVTaG9ydGhhbmRPYmplY3RCaW5kaW5nRWxlbWVudChub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gJ25vZGUnIGluIG9ialxuICAgICAgaWYgKFxuICAgICAgICBub2RlLnBhcmVudCAmJlxuICAgICAgICB0cy5pc1N0cmluZ0xpdGVyYWwobm9kZSkgJiZcbiAgICAgICAgdHMuaXNCaW5hcnlFeHByZXNzaW9uKG5vZGUucGFyZW50KSAmJlxuICAgICAgICBub2RlLnBhcmVudC5vcGVyYXRvclRva2VuLmtpbmQgPT09IHRzLlN5bnRheEtpbmQuSW5LZXl3b3JkXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUluS2V5d29yZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRzLmlzSWRlbnRpZmllcihub2RlKSAmJiBub2RlLnBhcmVudCkge1xuICAgICAgICAvLyBvYmoubm9kZVxuICAgICAgICBpZiAodHMuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24obm9kZS5wYXJlbnQpICYmIG5vZGUucGFyZW50Lm5hbWUgPT09IG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlUHJvcGVydHlBY2Nlc3NJZGVudGlmaWVyKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHJpdmF0ZSBub2RlXG4gICAgICAgIC8vIHB1YmxpYyBub2RlKClcbiAgICAgICAgaWYgKGlzQ2xhc3NNZW1iZXIobm9kZS5wYXJlbnQpICYmIG5vZGUucGFyZW50Lm5hbWUgPT09IG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlQ2xhc3NNZW1iZXIobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbnVtIEVudW0geyBub2RlIH1cbiAgICAgICAgaWYgKHRzLmlzRW51bU1lbWJlcihub2RlLnBhcmVudCkgJiYgbm9kZS5wYXJlbnQubmFtZSA9PT0gbm9kZSkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVFbnVtTWVtYmVyKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3QgYSA9IHsgbm9kZTogMTIzIH1cbiAgICAgICAgaWYgKHRzLmlzUHJvcGVydHlBc3NpZ25tZW50KG5vZGUucGFyZW50KSAmJiBub2RlLnBhcmVudC5uYW1lID09PSBub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZVByb3BlcnR5QXNzaWdubWVudChub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IHsgbm9kZTogbG9jYWxOYW1lIH0gPSBvYmo7XG4gICAgICAgIGlmICh0cy5pc0JpbmRpbmdFbGVtZW50KG5vZGUucGFyZW50KSAmJiBub2RlLnBhcmVudC5wcm9wZXJ0eU5hbWUgPT09IG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlQmluZGluZ0VsZW1lbnQobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA8Q29tcCBub2RlPXsuLi59IC8+XG4gICAgICAgIGlmICh0cy5pc0pzeEF0dHJpYnV0ZShub2RlLnBhcmVudCkgJiYgbm9kZS5wYXJlbnQubmFtZSA9PT0gbm9kZSkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVKc3hBdHRyaWJ1dGVOYW1lKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3RydWN0b3IocHVibGljIG5vZGU6IHN0cmluZykgeyAvLyA8LS0tIHRoaXNcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKG5vZGUpOyAvLyA8LS0tIGFuZCB0aGlzXG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChpc0NvbnN0cnVjdG9yUGFyYW1ldGVyKG5vZGUucGFyZW50KSAmJiBub2RlLnBhcmVudC5uYW1lID09PSBub2RlKSB8fFxuICAgICAgICAgIGlzQ29uc3RydWN0b3JQYXJhbWV0ZXJSZWZlcmVuY2Uobm9kZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZUN0b3JQYXJhbWV0ZXIobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gb2JqWydmb29CYXInXVxuICAgICAgaWYgKFxuICAgICAgICBub2RlLnBhcmVudCAmJlxuICAgICAgICB0cy5pc1N0cmluZ0xpdGVyYWwobm9kZSkgJiZcbiAgICAgICAgdHMuaXNFbGVtZW50QWNjZXNzRXhwcmVzc2lvbihub2RlLnBhcmVudCkgJiZcbiAgICAgICAgbm9kZS5wYXJlbnQuYXJndW1lbnRFeHByZXNzaW9uID09PSBub2RlXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVJbktleXdvcmQobm9kZTogdHMuU3RyaW5nTGl0ZXJhbCk6IHRzLlN0cmluZ0xpdGVyYWwge1xuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnQgYXMgdHMuQmluYXJ5RXhwcmVzc2lvbjtcbiAgICAgIGNvbnN0IG5vZGVUeXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24obm9kZSk7XG4gICAgICBpZiAoIW5vZGVUeXBlLmlzU3RyaW5nTGl0ZXJhbCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2V0IHR5cGUgZm9yIGxlZnQgZXhwcmVzc2lvbiBpbiAke25vZGUucGFyZW50LmdldFRleHQoKX1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcGVydHlOYW1lID0gbm9kZVR5cGUudmFsdWU7XG4gICAgICBpZiAoaXNUeXBlUHJvcGVydHlFeHRlcm5hbCh0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihwYXJlbnQucmlnaHQpLCBwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlTmV3Tm9kZShwcm9wZXJ0eU5hbWUsIFZpc2liaWxpdHlUeXBlLkludGVybmFsLCBjb250ZXh0LmZhY3RvcnkuY3JlYXRlU3RyaW5nTGl0ZXJhbCk7XG4gICAgfVxuXG4gICAgLy8gb2JqLm5vZGVcbiAgICBmdW5jdGlvbiBoYW5kbGVQcm9wZXJ0eUFjY2Vzc0lkZW50aWZpZXIobm9kZTogdHMuSWRlbnRpZmllcik6IHRzLklkZW50aWZpZXIge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5ld0lkZW50aWZpZXIobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gb2JqWydmb29CYXInXVxuICAgIGZ1bmN0aW9uIGhhbmRsZUVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uKG5vZGU6IHRzLlN0cmluZ0xpdGVyYWwpOiB0cy5TdHJpbmdMaXRlcmFsIHtcbiAgICAgIGNvbnN0IHZpc2liaWxpdHlUeXBlID0gZ2V0Tm9kZVZpc2liaWxpdHlUeXBlKG5vZGUpO1xuICAgICAgaWYgKHZpc2liaWxpdHlUeXBlID09PSBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNyZWF0ZU5ld05vZGVGcm9tUHJvcGVydHkobm9kZSwgdmlzaWJpbGl0eVR5cGUsIGNvbnRleHQuZmFjdG9yeS5jcmVhdGVTdHJpbmdMaXRlcmFsKTtcbiAgICB9XG5cbiAgICAvLyBwcml2YXRlIG5vZGVcbiAgICAvLyBwdWJsaWMgbm9kZSgpXG4gICAgZnVuY3Rpb24gaGFuZGxlQ2xhc3NNZW1iZXIobm9kZTogdHMuSWRlbnRpZmllcik6IHRzLklkZW50aWZpZXIge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5ld0lkZW50aWZpZXIobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gZW51bSBFbnVtIHsgbm9kZSB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRW51bU1lbWJlcihub2RlOiB0cy5JZGVudGlmaWVyKTogdHMuSWRlbnRpZmllciB7XG4gICAgICByZXR1cm4gY3JlYXRlTmV3SWRlbnRpZmllcihub2RlKTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCB7IG5vZGU6IGxvY2FsTmFtZSB9ID0gb2JqO1xuICAgIGZ1bmN0aW9uIGhhbmRsZUJpbmRpbmdFbGVtZW50KG5vZGU6IHRzLklkZW50aWZpZXIpOiB0cy5JZGVudGlmaWVyIHtcbiAgICAgIHJldHVybiBjcmVhdGVOZXdJZGVudGlmaWVyKG5vZGUpO1xuICAgIH1cblxuICAgIC8vIDxDb21wIG5vZGU9ey4uLn0gLz5cbiAgICBmdW5jdGlvbiBoYW5kbGVKc3hBdHRyaWJ1dGVOYW1lKG5vZGU6IHRzLklkZW50aWZpZXIpOiB0cy5JZGVudGlmaWVyIHtcbiAgICAgIHJldHVybiBjcmVhdGVOZXdJZGVudGlmaWVyKG5vZGUpO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGEgPSB7IG5vZGU6IDEyMyB9XG4gICAgZnVuY3Rpb24gaGFuZGxlUHJvcGVydHlBc3NpZ25tZW50KG5vZGU6IHRzLklkZW50aWZpZXIpOiB0cy5JZGVudGlmaWVyIHtcbiAgICAgIHJldHVybiBjcmVhdGVOZXdJZGVudGlmaWVyKG5vZGUpO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGEgPSB7IG5vZGUgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVNob3J0aGFuZFByb3BlcnR5QXNzaWdubWVudChcbiAgICAgIG5vZGU6IHRzLlNob3J0aGFuZFByb3BlcnR5QXNzaWdubWVudCxcbiAgICApOiB0cy5Qcm9wZXJ0eUFzc2lnbm1lbnQgfCB0cy5TaG9ydGhhbmRQcm9wZXJ0eUFzc2lnbm1lbnQge1xuICAgICAgY29uc3QgdmlzaWJpbGl0eVR5cGUgPSBnZXROb2RlVmlzaWJpbGl0eVR5cGUobm9kZS5uYW1lKTtcbiAgICAgIGlmICh2aXNpYmlsaXR5VHlwZSA9PT0gVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWwpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjcmVhdGVOZXdOb2RlRnJvbVByb3BlcnR5KG5vZGUubmFtZSwgdmlzaWJpbGl0eVR5cGUsIChuZXdOYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZmFjdG9yeS5jcmVhdGVQcm9wZXJ0eUFzc2lnbm1lbnQobmV3TmFtZSwgbm9kZS5uYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IHsgbm9kZSB9ID0gb2JqO1xuICAgIGZ1bmN0aW9uIGhhbmRsZVNob3J0aGFuZE9iamVjdEJpbmRpbmdFbGVtZW50KG5vZGU6IHRzLkJpbmRpbmdFbGVtZW50KTogdHMuQmluZGluZ0VsZW1lbnQge1xuICAgICAgaWYgKCF0cy5pc0lkZW50aWZpZXIobm9kZS5uYW1lKSkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdmlzaWJpbGl0eVR5cGUgPSBnZXROb2RlVmlzaWJpbGl0eVR5cGUobm9kZSk7XG4gICAgICBpZiAodmlzaWJpbGl0eVR5cGUgPT09IFZpc2liaWxpdHlUeXBlLkV4dGVybmFsKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlTmV3Tm9kZUZyb21Qcm9wZXJ0eShub2RlLm5hbWUsIHZpc2liaWxpdHlUeXBlLCAobmV3TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmZhY3RvcnkuY3JlYXRlQmluZGluZ0VsZW1lbnQobm9kZS5kb3REb3REb3RUb2tlbiwgbmV3TmFtZSwgbm9kZS5uYW1lLCBub2RlLmluaXRpYWxpemVyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNvbnN0cnVjdG9yKHB1YmxpYyBub2RlOiBzdHJpbmcpIHsgLy8gPC0tLSB0aGlzXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKG5vZGUpOyAvLyA8LS0tIGFuZCB0aGlzXG4gICAgLy8gfVxuICAgIGZ1bmN0aW9uIGhhbmRsZUN0b3JQYXJhbWV0ZXIobm9kZTogdHMuSWRlbnRpZmllcik6IHRzLklkZW50aWZpZXIge1xuICAgICAgcmV0dXJuIGNyZWF0ZU5ld0lkZW50aWZpZXIobm9kZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3SWRlbnRpZmllcihvbGRJZGVudGlmaWVyOiB0cy5JZGVudGlmaWVyKTogdHMuSWRlbnRpZmllciB7XG4gICAgICBjb25zdCB2aXNpYmlsaXR5VHlwZSA9IGdldE5vZGVWaXNpYmlsaXR5VHlwZShvbGRJZGVudGlmaWVyKTtcbiAgICAgIGlmICh2aXNpYmlsaXR5VHlwZSA9PT0gVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWwpIHtcbiAgICAgICAgcmV0dXJuIG9sZElkZW50aWZpZXI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjcmVhdGVOZXdOb2RlRnJvbVByb3BlcnR5KG9sZElkZW50aWZpZXIsIHZpc2liaWxpdHlUeXBlLCBjb250ZXh0LmZhY3RvcnkuY3JlYXRlSWRlbnRpZmllcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3Tm9kZUZyb21Qcm9wZXJ0eTxUIGV4dGVuZHMgdHMuTm9kZT4oXG4gICAgICBvbGRQcm9wZXJ0eTogdHMuUHJvcGVydHlOYW1lLFxuICAgICAgdHlwZTogVmlzaWJpbGl0eVR5cGUsXG4gICAgICBjcmVhdGVOb2RlOiAobmV3TmFtZTogc3RyaW5nKSA9PiBULFxuICAgICk6IFQge1xuICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZUNoZWNrZXIuZ2V0U3ltYm9sQXRMb2NhdGlvbihvbGRQcm9wZXJ0eSk7XG4gICAgICBpZiAoc3ltYm9sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZ2V0IHN5bWJvbCBmb3Igbm9kZSBcIiR7b2xkUHJvcGVydHkuZ2V0VGV4dCgpfVwiYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9sZFByb3BlcnR5TmFtZSA9IHRzLnVuZXNjYXBlTGVhZGluZ1VuZGVyc2NvcmVzKHN5bWJvbC5lc2NhcGVkTmFtZSk7XG5cbiAgICAgIHJldHVybiBjcmVhdGVOZXdOb2RlKG9sZFByb3BlcnR5TmFtZSwgdHlwZSwgY3JlYXRlTm9kZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3Tm9kZTxUIGV4dGVuZHMgdHMuTm9kZT4oXG4gICAgICBvbGRQcm9wZXJ0eU5hbWU6IHN0cmluZyxcbiAgICAgIHR5cGU6IFZpc2liaWxpdHlUeXBlLFxuICAgICAgY3JlYXRlTm9kZTogKG5ld05hbWU6IHN0cmluZykgPT4gVCxcbiAgICApOiBUIHtcbiAgICAgIGNvbnN0IG5ld1Byb3BlcnR5TmFtZSA9IGdldE5ld05hbWUob2xkUHJvcGVydHlOYW1lLCB0eXBlKTtcbiAgICAgIHJldHVybiBjcmVhdGVOb2RlKG5ld1Byb3BlcnR5TmFtZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV3TmFtZShvcmlnaW5hbE5hbWU6IHN0cmluZywgdHlwZTogVmlzaWJpbGl0eVR5cGUpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIGAke1xuICAgICAgICB0eXBlID09PSBWaXNpYmlsaXR5VHlwZS5Qcml2YXRlID8gZnVsbE9wdGlvbnMucHJpdmF0ZVByZWZpeCA6IGZ1bGxPcHRpb25zLmludGVybmFsUHJlZml4XG4gICAgICB9JHtvcmlnaW5hbE5hbWV9YDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxTeW1ib2woc3ltYm9sOiB0cy5TeW1ib2wpOiB0cy5TeW1ib2wge1xuICAgICAgaWYgKHN5bWJvbC5mbGFncyAmIHRzLlN5bWJvbEZsYWdzLkFsaWFzKSB7XG4gICAgICAgIHN5bWJvbCA9IHR5cGVDaGVja2VyLmdldEFsaWFzZWRTeW1ib2woc3ltYm9sKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN5bWJvbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROb2RlU3ltYm9sKG5vZGU6IHRzLkV4cHJlc3Npb24gfCB0cy5OYW1lZERlY2xhcmF0aW9uIHwgdHMuRGVjbGFyYXRpb25OYW1lKTogdHMuU3ltYm9sIHwgbnVsbCB7XG4gICAgICBjb25zdCBzeW1ib2wgPSB0eXBlQ2hlY2tlci5nZXRTeW1ib2xBdExvY2F0aW9uKG5vZGUpO1xuICAgICAgaWYgKHN5bWJvbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0QWN0dWFsU3ltYm9sKHN5bWJvbCk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICBmdW5jdGlvbiBpc1R5cGVQcm9wZXJ0eUV4dGVybmFsKHR5cGU6IHRzLlR5cGUsIHR5cGVQcm9wZXJ0eU5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgLy8gaWYgYSB0eXBlIGlzIHVua25vd24gb3IgYW55IC0gdGhleSBzaG91bGQgYmUgaW50ZXJwcmV0IGFzIGEgcHVibGljIG9uZXNcbiAgICAgIGlmICh0eXBlLmZsYWdzICYgdHMuVHlwZUZsYWdzLlVua25vd24gfHwgdHlwZS5mbGFncyAmIHRzLlR5cGVGbGFncy5BbnkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLmZsYWdzICYgdHMuVHlwZUZsYWdzLkluZGV4ZWRBY2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIGlzVHlwZVByb3BlcnR5RXh0ZXJuYWwodHlwZUNoZWNrZXIuZ2V0QXBwYXJlbnRUeXBlKHR5cGUpLCB0eXBlUHJvcGVydHlOYW1lKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgIGNvbnN0IHByb3BlcnR5U3ltYm9sID0gdHlwZUNoZWNrZXIuZ2V0UHJvcGVydHlPZlR5cGUodHlwZSwgdHlwZVByb3BlcnR5TmFtZSk7XG5cbiAgICAgIGlmICh0eXBlLmZsYWdzICYgdHMuVHlwZUZsYWdzLk9iamVjdCkge1xuICAgICAgICBjb25zdCBvYmplY3RUeXBlID0gdHlwZSBhcyB0cy5PYmplY3RUeXBlO1xuXG4gICAgICAgIC8vIHRyZWF0IGFueSB0dXBsZSBwcm9wZXJ0eSBhcyBcImV4dGVybmFsXCJcbiAgICAgICAgaWYgKG9iamVjdFR5cGUub2JqZWN0RmxhZ3MgJiB0cy5PYmplY3RGbGFncy5UdXBsZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9iamVjdFR5cGUub2JqZWN0RmxhZ3MgJiB0cy5PYmplY3RGbGFncy5SZWZlcmVuY2UpIHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSAob2JqZWN0VHlwZSBhcyB0cy5UeXBlUmVmZXJlbmNlKS50YXJnZXQ7XG4gICAgICAgICAgaWYgKHRhcmdldCAhPT0gb2JqZWN0VHlwZSAmJiBpc1R5cGVQcm9wZXJ0eUV4dGVybmFsKHRhcmdldCwgdHlwZVByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluIGNhc2Ugd2hlbiB3ZSBjYW4ndCBnZXQgd2hlcmUgYSBwcm9wZXJ0eSBjb21lIGZyb20gaW4gbWFwcGVkIHR5cGVzXG4gICAgICAgIC8vIGxldCdzIGNoZWNrIHRoZSB3aG9sZSB0eXBlIGV4cGxpY2l0bHlcbiAgICAgICAgLy8gdGh1cyBpbiBjYXNlIG9mIHdoZW4gcHJvcGVydHkgZG9lc24ndCBoYXZlIGEgZGVjbGFyYXRpb24gbGV0J3MgdHJlYXQgYW55IHByb3BlcnR5IG9mIGEgbWFwcGVkIHR5cGUgYXMgXCJleHRlcm5hbFwiIGlmIGl0cyBwYXJlbnQgdHlwZSBpcyBleHRlcm5hbFxuICAgICAgICAvLyBlLmcuIFJlYWRvbmx5PEZvbz4uZmllbGQgd2lsbCBsb29rIGZvciBgZmllbGRgIGluIF9Gb29fIHR5cGUgKG5vdCBpbiBSZWFkb25seTxGb28+KSwgYnV0IHsgW0sgaW4gJ2ZvbycgfCAnYmFyJ106IGFueSB9IHdvbid0XG4gICAgICAgIC8vIHBlcmhhcHMgaXQgd291bGQgYmUgYXdlc29tZSB0byBoYW5kbGUgZXhhY3RseSBwcm9wZXJ0eSB3ZSBoYXZlLCBidXQgXHUwMEFGXFxfKFx1MzBDNClfL1x1MDBBRlxuICAgICAgICBjb25zdCBwcm9wZXJ0eUhhc0RlY2xhcmF0aW9ucyA9XG4gICAgICAgICAgcHJvcGVydHlTeW1ib2wgIT09IHVuZGVmaW5lZCA/IGdldERlY2xhcmF0aW9uc0ZvclN5bWJvbChwcm9wZXJ0eVN5bWJvbCkubGVuZ3RoICE9PSAwIDogZmFsc2U7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBvYmplY3RUeXBlLm9iamVjdEZsYWdzICYgdHMuT2JqZWN0RmxhZ3MuTWFwcGVkICYmXG4gICAgICAgICAgc3ltYm9sICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAhcHJvcGVydHlIYXNEZWNsYXJhdGlvbnMgJiZcbiAgICAgICAgICBnZXRTeW1ib2xWaXNpYmlsaXR5VHlwZShzeW1ib2wpID09PSBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS5pc1VuaW9uT3JJbnRlcnNlY3Rpb24oKSkge1xuICAgICAgICBjb25zdCBoYXNFeHRlcm5hbFN1YlR5cGUgPSB0eXBlLnR5cGVzLnNvbWUoKHQ6IHRzLlR5cGUpID0+IGlzVHlwZVByb3BlcnR5RXh0ZXJuYWwodCwgdHlwZVByb3BlcnR5TmFtZSkpO1xuICAgICAgICBpZiAoaGFzRXh0ZXJuYWxTdWJUeXBlKSB7XG4gICAgICAgICAgcmV0dXJuIGhhc0V4dGVybmFsU3ViVHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3ltYm9sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sKHN5bWJvbCk7XG4gICAgICAgIGZvciAoY29uc3QgZGVjbGFyYXRpb24gb2YgZGVjbGFyYXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHRzLmlzQ2xhc3NEZWNsYXJhdGlvbihkZWNsYXJhdGlvbikgfHwgdHMuaXNJbnRlcmZhY2VEZWNsYXJhdGlvbihkZWNsYXJhdGlvbikpICYmXG4gICAgICAgICAgICBkZWNsYXJhdGlvbi5oZXJpdGFnZUNsYXVzZXMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgaGFzSGVyaXRhZ2VDbGF1c2VzRXh0ZXJuYWxzID0gZGVjbGFyYXRpb24uaGVyaXRhZ2VDbGF1c2VzLnNvbWUoKGNsYXVzZTogdHMuSGVyaXRhZ2VDbGF1c2UpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNsYXVzZS50eXBlcy5zb21lKChleHByOiB0cy5FeHByZXNzaW9uV2l0aFR5cGVBcmd1bWVudHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUeXBlUHJvcGVydHlFeHRlcm5hbCh0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihleHByKSwgdHlwZVByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChoYXNIZXJpdGFnZUNsYXVzZXNFeHRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eVN5bWJvbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtwcm9wZXJ0eVN5bWJvbCwgLi4uc3BsaXRUcmFuc2llbnRTeW1ib2wocHJvcGVydHlTeW1ib2wsIHR5cGVDaGVja2VyKV0uc29tZShcbiAgICAgICAgKHN5bTogdHMuU3ltYm9sKSA9PiBnZXRTeW1ib2xWaXNpYmlsaXR5VHlwZShzeW0pID09PSBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICBmdW5jdGlvbiBnZXROb2RlVmlzaWJpbGl0eVR5cGUoXG4gICAgICBub2RlOiB0cy5FeHByZXNzaW9uIHwgdHMuSWRlbnRpZmllciB8IHRzLlN0cmluZ0xpdGVyYWwgfCB0cy5CaW5kaW5nRWxlbWVudCxcbiAgICApOiBWaXNpYmlsaXR5VHlwZSB7XG4gICAgICBpZiAodHMuaXNQcm9wZXJ0eUFzc2lnbm1lbnQobm9kZS5wYXJlbnQpIHx8IHRzLmlzU2hvcnRoYW5kUHJvcGVydHlBc3NpZ25tZW50KG5vZGUucGFyZW50KSkge1xuICAgICAgICBsZXQgZXhwcmVzc2lvblRvR2V0VHlwZUZyb206IHRzLkV4cHJlc3Npb24gPSBub2RlLnBhcmVudC5wYXJlbnQ7XG4gICAgICAgIGxldCBsYXN0S25vd25FeHByZXNzaW9uOiB0cy5Bc0V4cHJlc3Npb24gfCB0cy5PYmplY3RMaXRlcmFsRXhwcmVzc2lvbiA9IG5vZGUucGFyZW50LnBhcmVudDtcbiAgICAgICAgbGV0IGN1cnJlbnROb2RlOiB0cy5Ob2RlID0gbm9kZS5wYXJlbnQucGFyZW50LnBhcmVudDtcblxuICAgICAgICB3aGlsZSAodHMuaXNQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihjdXJyZW50Tm9kZSkgfHwgdHMuaXNBc0V4cHJlc3Npb24oY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgaWYgKHRzLmlzQXNFeHByZXNzaW9uKGN1cnJlbnROb2RlKSkge1xuICAgICAgICAgICAgZXhwcmVzc2lvblRvR2V0VHlwZUZyb20gPSBsYXN0S25vd25FeHByZXNzaW9uO1xuICAgICAgICAgICAgbGFzdEtub3duRXhwcmVzc2lvbiA9IGN1cnJlbnROb2RlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG8gZ2V0IGNvcnJlY3QgY29udGV4dHVhbCB0eXBlIHdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgcHJldmlvdXMgbGFzdCBleHByZXNzaW9uIHJhdGhlciB0aGFuIHRoZSBsYXN0IG9uZVxuICAgICAgICBjb25zdCB0eXBlID0gdHlwZUNoZWNrZXIuZ2V0Q29udGV4dHVhbFR5cGUoZXhwcmVzc2lvblRvR2V0VHlwZUZyb20pO1xuICAgICAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkICYmIGlzVHlwZVByb3BlcnR5RXh0ZXJuYWwodHlwZSwgbm9kZS5nZXRUZXh0KCkpKSB7XG4gICAgICAgICAgcmV0dXJuIFZpc2liaWxpdHlUeXBlLkV4dGVybmFsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0cy5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihub2RlLnBhcmVudCkgfHwgdHMuaXNFbGVtZW50QWNjZXNzRXhwcmVzc2lvbihub2RlLnBhcmVudCkpIHtcbiAgICAgICAgaWYgKHRzLmlzSWRlbnRpZmllcihub2RlLnBhcmVudC5leHByZXNzaW9uKSkge1xuICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25TeW1ib2wgPSB0eXBlQ2hlY2tlci5nZXRTeW1ib2xBdExvY2F0aW9uKG5vZGUucGFyZW50LmV4cHJlc3Npb24pO1xuICAgICAgICAgIGlmIChleHByZXNzaW9uU3ltYm9sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGltcG9ydCAqIGFzIGZvbyBmcm9tICcuLi4nO1xuICAgICAgICAgICAgLy8gZm9vLm5vZGU7XG4gICAgICAgICAgICAvLyBmb29bJ25vZGUnXTtcbiAgICAgICAgICAgIC8vIG9yXG4gICAgICAgICAgICAvLyBuYW1lc3BhY2UgRm9vIHsgLi4uIH1cbiAgICAgICAgICAgIC8vIEZvby5ub2RlXG4gICAgICAgICAgICAvLyBGb29bJ25vZGUnXTtcbiAgICAgICAgICAgIGNvbnN0IGlzTW9kdWxlT3JTdGFySW1wb3J0ID0gZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sKGV4cHJlc3Npb25TeW1ib2wpLnNvbWUoXG4gICAgICAgICAgICAgIChkZWNsOiB0cy5EZWNsYXJhdGlvbikgPT4gdHMuaXNOYW1lc3BhY2VJbXBvcnQoZGVjbCkgfHwgdHMuaXNNb2R1bGVEZWNsYXJhdGlvbihkZWNsKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoaXNNb2R1bGVPclN0YXJJbXBvcnQpIHtcbiAgICAgICAgICAgICAgLy8gdHJlYXQgYWNjZXNzaW5nIHRvIGltcG9ydC1zdGFyIG9yIG5hbWVzcGFjZSBhcyBleHRlcm5hbCBvbmVcbiAgICAgICAgICAgICAgLy8gYmVjYXVzZSB3ZSBjYW4ndCByZW5hbWUgdGhlbSB5ZXRcbiAgICAgICAgICAgICAgcmV0dXJuIFZpc2liaWxpdHlUeXBlLkV4dGVybmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1R5cGVQcm9wZXJ0eUV4dGVybmFsKHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKG5vZGUucGFyZW50LmV4cHJlc3Npb24pLCBub2RlLmdldFRleHQoKSkpIHtcbiAgICAgICAgICByZXR1cm4gVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gc2hvcnRoYW5kIGJpbmRpbmcgZWxlbWVudFxuICAgICAgLy8gY29uc3QgeyBub2RlIH0gPSBvYmo7XG4gICAgICBpZiAoXG4gICAgICAgIHRzLmlzQmluZGluZ0VsZW1lbnQobm9kZSkgJiZcbiAgICAgICAgaXNUeXBlUHJvcGVydHlFeHRlcm5hbCh0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihub2RlLnBhcmVudCksIG5vZGUuZ2V0VGV4dCgpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbDtcbiAgICAgIH1cblxuICAgICAgLy8gZnVsbCBiaW5kaW5nIGVsZW1lbnRcbiAgICAgIC8vIGNvbnN0IHsgbm9kZTogcHJvcE5hbWUgfSA9IG9iajtcbiAgICAgIGlmIChcbiAgICAgICAgdHMuaXNCaW5kaW5nRWxlbWVudChub2RlLnBhcmVudCkgJiZcbiAgICAgICAgaXNUeXBlUHJvcGVydHlFeHRlcm5hbCh0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihub2RlLnBhcmVudC5wYXJlbnQpLCBub2RlLmdldFRleHQoKSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWw7XG4gICAgICB9XG5cbiAgICAgIC8vIDxDb21wIG5vZGU9ey4uLn0gLz5cbiAgICAgIGlmICh0cy5pc0pzeEF0dHJpYnV0ZShub2RlLnBhcmVudCkpIHtcbiAgICAgICAgY29uc3QganN4VGFnU3ltYm9sID0gdHlwZUNoZWNrZXIuZ2V0U3ltYm9sQXRMb2NhdGlvbihub2RlLnBhcmVudC5wYXJlbnQucGFyZW50LnRhZ05hbWUpO1xuICAgICAgICBpZiAoanN4VGFnU3ltYm9sICE9PSB1bmRlZmluZWQgJiYganN4VGFnU3ltYm9sLnZhbHVlRGVjbGFyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IGpzeFByb3BzVHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVPZlN5bWJvbEF0TG9jYXRpb24oanN4VGFnU3ltYm9sLCBqc3hUYWdTeW1ib2wudmFsdWVEZWNsYXJhdGlvbik7XG4gICAgICAgICAgaWYgKGlzVHlwZVByb3BlcnR5RXh0ZXJuYWwoanN4UHJvcHNUeXBlLCBub2RlLmdldFRleHQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZVN5bWJvbCA9IGdldE5vZGVTeW1ib2wobm9kZSk7XG4gICAgICBjb25zdCBjbGFzc09mTWVtYmVyID0gbm9kZVN5bWJvbCAhPT0gbnVsbCA/IGdldENsYXNzT2ZNZW1iZXJTeW1ib2wobm9kZVN5bWJvbCkgOiBudWxsO1xuICAgICAgaWYgKFxuICAgICAgICBjbGFzc09mTWVtYmVyICE9PSBudWxsICYmXG4gICAgICAgIGlzVHlwZVByb3BlcnR5RXh0ZXJuYWwodHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24oY2xhc3NPZk1lbWJlciksIG5vZGUuZ2V0VGV4dCgpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbDtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3ltYm9sID0gdHMuaXNCaW5kaW5nRWxlbWVudChub2RlKSA/IGdldFNob3J0aGFuZE9iamVjdEJpbmRpbmdFbGVtZW50U3ltYm9sKG5vZGUpIDogbm9kZVN5bWJvbDtcbiAgICAgIGlmIChzeW1ib2wgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFZpc2liaWxpdHlUeXBlLkV4dGVybmFsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0U3ltYm9sVmlzaWJpbGl0eVR5cGUoc3ltYm9sKTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgIGZ1bmN0aW9uIGdldFN5bWJvbFZpc2liaWxpdHlUeXBlKG5vZGVTeW1ib2w6IHRzLlN5bWJvbCk6IFZpc2liaWxpdHlUeXBlIHtcbiAgICAgIG5vZGVTeW1ib2wgPSBnZXRBY3R1YWxTeW1ib2wobm9kZVN5bWJvbCk7XG5cbiAgICAgIGNvbnN0IGNhY2hlZFZhbHVlID0gY2FjaGUuZ2V0KG5vZGVTeW1ib2wpO1xuICAgICAgaWYgKGNhY2hlZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZFZhbHVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzeW1ib2xEZWNsYXJhdGlvbnMgPSBnZXREZWNsYXJhdGlvbnNGb3JTeW1ib2wobm9kZVN5bWJvbCk7XG4gICAgICBpZiAoc3ltYm9sRGVjbGFyYXRpb25zLnNvbWUoaXNEZWNsYXJhdGlvbkZyb21FeHRlcm5hbHMpKSB7XG4gICAgICAgIHJldHVybiBwdXRUb0NhY2hlKG5vZGVTeW1ib2wsIFZpc2liaWxpdHlUeXBlLkV4dGVybmFsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN5bWJvbERlY2xhcmF0aW9ucy5zb21lKChkZWNsOiB0cy5EZWNsYXJhdGlvbikgPT4gaGFzTW9kaWZpZXIoZGVjbCwgdHMuU3ludGF4S2luZC5EZWNsYXJlS2V5d29yZCkpKSB7XG4gICAgICAgIHJldHVybiBwdXRUb0NhY2hlKG5vZGVTeW1ib2wsIFZpc2liaWxpdHlUeXBlLkV4dGVybmFsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGVTeW1ib2wuZXNjYXBlZE5hbWUgPT09IFwicHJvdG90eXBlXCIpIHtcbiAgICAgICAgLy8gYWNjZXNzaW5nIHRvIHByb3RvdHlwZVxuICAgICAgICByZXR1cm4gcHV0VG9DYWNoZShub2RlU3ltYm9sLCBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmdWxsT3B0aW9ucy5wdWJsaWNKU0RvY1RhZy5sZW5ndGggIT09IDAgfHwgZnVsbE9wdGlvbnMuaWdub3JlRGVjb3JhdGVkKSB7XG4gICAgICAgIGZvciAoY29uc3QgZGVjbGFyYXRpb24gb2Ygc3ltYm9sRGVjbGFyYXRpb25zKSB7XG4gICAgICAgICAgbGV0IGN1cnJlbnROb2RlOiB0cy5Ob2RlID0gZGVjbGFyYXRpb247XG4gICAgICAgICAgd2hpbGUgKCF0cy5pc1NvdXJjZUZpbGUoY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGZ1bGxPcHRpb25zLnB1YmxpY0pTRG9jVGFnLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgICBnZXROb2RlSlNEb2NDb21tZW50KGN1cnJlbnROb2RlKS5pbmNsdWRlcyhgQCR7ZnVsbE9wdGlvbnMucHVibGljSlNEb2NUYWd9YClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gcHV0VG9DYWNoZShub2RlU3ltYm9sLCBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmdWxsT3B0aW9ucy5pZ25vcmVEZWNvcmF0ZWQgJiYgaGFzRGVjb3JhdG9ycyhjdXJyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHB1dFRvQ2FjaGUobm9kZVN5bWJvbCwgVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPOiBtdXRlIGVudW0gcmVuYW1lc1xuICAgICAgICAgICAgaWYgKHRzLmlzRW51bURlY2xhcmF0aW9uKGN1cnJlbnROb2RlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gcHV0VG9DYWNoZShub2RlU3ltYm9sLCBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNQcml2YXRlQ2xhc3NNZW1iZXIobm9kZVN5bWJvbCkpIHtcbiAgICAgICAgcmV0dXJuIHB1dFRvQ2FjaGUobm9kZVN5bWJvbCwgVmlzaWJpbGl0eVR5cGUuUHJpdmF0ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHBvcnRzU3ltYm9sVHJlZS5pc1N5bWJvbEFjY2Vzc2libGVGcm9tRXhwb3J0cyhub2RlU3ltYm9sKSkge1xuICAgICAgICByZXR1cm4gcHV0VG9DYWNoZShub2RlU3ltYm9sLCBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZGVjbGFyYXRpb24gb2Ygc3ltYm9sRGVjbGFyYXRpb25zKSB7XG4gICAgICAgIGlmICghaXNOb2RlTmFtZWREZWNsYXJhdGlvbihkZWNsYXJhdGlvbi5wYXJlbnQpIHx8IGRlY2xhcmF0aW9uLnBhcmVudC5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmVudFN5bWJvbCA9IGdldE5vZGVTeW1ib2woZGVjbGFyYXRpb24ucGFyZW50Lm5hbWUpO1xuICAgICAgICBpZiAocGFyZW50U3ltYm9sID09PSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2V0U3ltYm9sVmlzaWJpbGl0eVR5cGUocGFyZW50U3ltYm9sKSA9PT0gVmlzaWJpbGl0eVR5cGUuRXh0ZXJuYWwpIHtcbiAgICAgICAgICByZXR1cm4gcHV0VG9DYWNoZShub2RlU3ltYm9sLCBWaXNpYmlsaXR5VHlwZS5FeHRlcm5hbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHB1dFRvQ2FjaGUobm9kZVN5bWJvbCwgVmlzaWJpbGl0eVR5cGUuSW50ZXJuYWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNob3J0aGFuZE9iamVjdEJpbmRpbmdFbGVtZW50U3ltYm9sKGVsZW1lbnQ6IHRzLkJpbmRpbmdFbGVtZW50KTogdHMuU3ltYm9sIHwgbnVsbCB7XG4gICAgICBpZiAoZWxlbWVudC5wcm9wZXJ0eU5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBoYW5kbGUgYmluZGluZyBlbGVtZW50IHdpdGggcHJvcGVydHkgbmFtZTogJHtlbGVtZW50LmdldFRleHQoKX0gaW4gJHtcbiAgICAgICAgICAgIGVsZW1lbnQuZ2V0U291cmNlRmlsZSgpLmZpbGVOYW1lXG4gICAgICAgICAgfWAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdHMuaXNJZGVudGlmaWVyKGVsZW1lbnQubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIG5vIHByb3BlcnR5IG5hbWUgaXMgc2V0IChjb25zdCB7IGEgfSA9IGZvbylcbiAgICAgIC8vIHRoZW4gbm9kZS5wcm9wZXJ0eU5hbWUgaXMgdW5kZWZpbmVkIGFuZCB3ZSBuZWVkIHRvIGZpbmQgdGhpcyBwcm9wZXJ0eSBvdXJzZWx2ZXNcbiAgICAgIC8vIHNvIGxldCdzIHVzZSBnby10by1kZWZpbml0aW9uIGFsZ29yaXRobSBmcm9tIFRTU2VydmVyXG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2Jsb2IvNjcyYjBlM2UxNmFkMThiNDIyZGJlMGNlYzVhOThmY2U0OTg4MWI3Ni9zcmMvc2VydmljZXMvZ29Ub0RlZmluaXRpb24udHMjTDU4LUw3N1xuICAgICAgY29uc3QgdHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGVsZW1lbnQucGFyZW50IGFzIHRzLk5vZGUpO1xuICAgICAgaWYgKHR5cGUuaXNVbmlvbigpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHlwZS5nZXRQcm9wZXJ0eSh0cy5pZFRleHQoZWxlbWVudC5uYW1lKSkgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RlY2xhcmF0aW9uRnJvbUV4dGVybmFscyhkZWNsYXJhdGlvbjogdHMuRGVjbGFyYXRpb24pOiBib29sZWFuIHtcbiAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBkZWNsYXJhdGlvbi5nZXRTb3VyY2VGaWxlKCk7XG5cbiAgICAgIC8vIGFsbCBkZWNsYXJhdGlvbnMgZnJvbSBkZWNsYXJhdGlvbiBzb3VyY2UgZmlsZXMgYXJlIGV4dGVybmFsIGJ5IGRlZmF1bHRcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHNvdXJjZUZpbGUuaXNEZWNsYXJhdGlvbkZpbGUgfHxcbiAgICAgICAgcHJvZ3JhbS5pc1NvdXJjZUZpbGVEZWZhdWx0TGlicmFyeShzb3VyY2VGaWxlKSB8fFxuICAgICAgICAvW1xcXFwvXW5vZGVfbW9kdWxlc1tcXFxcL10vLnRlc3Qoc291cmNlRmlsZS5maWxlTmFtZSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNDb25zdHJ1Y3RvclBhcmFtZXRlclJlZmVyZW5jZShub2RlOiB0cy5Ob2RlKTogbm9kZSBpcyB0cy5JZGVudGlmaWVyIHtcbiAgICAgIGlmICghdHMuaXNJZGVudGlmaWVyKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzU3ltYm9sQ2xhc3NNZW1iZXIodHlwZUNoZWNrZXIuZ2V0U3ltYm9sQXRMb2NhdGlvbihub2RlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChzb3VyY2VGaWxlOiB0cy5Tb3VyY2VGaWxlKSA9PiB0cmFuc2Zvcm1Ob2RlQW5kQ2hpbGRyZW4oc291cmNlRmlsZSwgY29udGV4dCk7XG4gIH07XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcbWFuZ2xlclwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcY29kZVxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFx0b29sc1xcXFxjb21waWxlclxcXFxtYW5nbGVyXFxcXGV4cG9ydHMtc3ltYm9sLXRyZWUudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Q6L2NvZGUvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvdG9vbHMvY29tcGlsZXIvbWFuZ2xlci9leHBvcnRzLXN5bWJvbC10cmVlLnRzXCI7aW1wb3J0IHRzIGZyb20gXCJ0eXBlc2NyaXB0XCI7XG5cbmltcG9ydCB7XG4gIGdldEFjdHVhbFN5bWJvbCxcbiAgc3BsaXRUcmFuc2llbnRTeW1ib2wsXG4gIGlzQ2xhc3NNZW1iZXIsXG4gIGhhc1ByaXZhdGVLZXl3b3JkLFxuICBnZXRFeHBvcnRzRm9yU291cmNlRmlsZSxcbiAgZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sLFxufSBmcm9tIFwiLi90eXBlc2NyaXB0LWhlbHBlcnNcIjtcblxuZXhwb3J0IGNsYXNzIEV4cG9ydHNTeW1ib2xUcmVlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBwcm9ncmFtOiB0cy5Qcm9ncmFtO1xuICBwcml2YXRlIHJlYWRvbmx5IGV4cG9ydHNUcmVlOiBNYXA8dHMuU3ltYm9sLCBTZXQ8dHMuU3ltYm9sPj4gPSBuZXcgTWFwKCk7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHByb2dyYW06IHRzLlByb2dyYW0sIGVudHJ5U291cmNlRmlsZXM6IHJlYWRvbmx5IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICB0aGlzLmNvbXB1dGVUcmVlRm9yRXhwb3J0cyhlbnRyeVNvdXJjZUZpbGVzKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1N5bWJvbEFjY2Vzc2libGVGcm9tRXhwb3J0cyhzeW1ib2w6IHRzLlN5bWJvbCk6IGJvb2xlYW4ge1xuICAgIHN5bWJvbCA9IHRoaXMuZ2V0QWN0dWFsU3ltYm9sKHN5bWJvbCk7XG5cbiAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XG4gICAgdGhpcy5leHBvcnRzVHJlZS5mb3JFYWNoKChzZXQ6IFNldDx0cy5TeW1ib2w+KSA9PiB7XG4gICAgICByZXN1bHQgPSByZXN1bHQgfHwgc2V0LmhhcyhzeW1ib2wpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgY29tcHV0ZVRyZWVGb3JFeHBvcnRzKGVudHJ5U291cmNlRmlsZXM6IHJlYWRvbmx5IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgdGhpcy5leHBvcnRzVHJlZS5jbGVhcigpO1xuXG4gICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0aGlzLnByb2dyYW0uZ2V0VHlwZUNoZWNrZXIoKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGVudHJ5U291cmNlRmlsZXMpIHtcbiAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSB0aGlzLnByb2dyYW0uZ2V0U291cmNlRmlsZShmaWxlUGF0aCk7XG4gICAgICBpZiAoc291cmNlRmlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgc291cmNlIGZpbGUgJHtmaWxlUGF0aH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW50cnlTb3VyY2VGaWxlID0gdHlwZUNoZWNrZXIuZ2V0U3ltYm9sQXRMb2NhdGlvbihzb3VyY2VGaWxlKTtcbiAgICAgIGlmIChlbnRyeVNvdXJjZUZpbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBpZiBhIHNvdXJjZSBmaWxlIGRvZXNuJ3QgaGF2ZSBhbnkgZXhwb3J0IC0gdGhlbiBpdCBkb2Vzbid0IGhhdmUgYSBzeW1ib2wgYXMgd2VsbFxuICAgICAgICAvLyBzbyBqdXN0IHNraXAgaXQgaGVyZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBlbnRyeUV4cG9ydFN5bWJvbCBvZiBnZXRFeHBvcnRzRm9yU291cmNlRmlsZSh0eXBlQ2hlY2tlciwgZW50cnlTb3VyY2VGaWxlKSkge1xuICAgICAgICBjb25zdCBleHBvcnRTeW1ib2xzU2V0ID0gbmV3IFNldDx0cy5TeW1ib2w+KCk7XG4gICAgICAgIHRoaXMuZXhwb3J0c1RyZWUuc2V0KGVudHJ5RXhwb3J0U3ltYm9sLCBleHBvcnRTeW1ib2xzU2V0KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9ydERlY2xhcmF0aW9uIG9mIGdldERlY2xhcmF0aW9uc0ZvclN5bWJvbChlbnRyeUV4cG9ydFN5bWJvbCkpIHtcbiAgICAgICAgICB0aGlzLmNvbXB1dGVUcmVlRm9yQ2hpbGRyZW4oZXhwb3J0U3ltYm9sc1NldCwgZXhwb3J0RGVjbGFyYXRpb24sIG5ldyBTZXQ8dHMuU3ltYm9sPigpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29tcHV0ZVRyZWVGb3JDaGlsZHJlbihcbiAgICB0YXJnZXRTeW1ib2xzU2V0OiBTZXQ8dHMuU3ltYm9sPixcbiAgICBub2RlOiB0cy5Ob2RlLFxuICAgIHZpc2l0ZWRTeW1ib2xzOiBTZXQ8dHMuU3ltYm9sPixcbiAgKTogdm9pZCB7XG4gICAgLy8gaXQncyBzaW1pbGFyIHRvIGhhbmRsaW5nIHRzLkJsb2NrIG5vZGUgLSBib3RoIEJsb2NrIGFuZCB2YXJpYWJsZSdzIGluaXRpYWxpemVyIGFyZSBwYXJ0IG9mIF9pbXBsZW1lbnRhdGlvbl9cbiAgICAvLyBhbmQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGF0IGltcGxlbWVudGF0aW9uIGF0IGFsbCAtIHdlIGp1c3Qgb25seSBuZWVkIHRvIHdvcnJ5IGl0J3MgZGVmaW5pdGlvblxuICAgIC8vIGZvciBmdW5jdGlvbnMgaXQgaXMgYXJndW1lbnRzIGFuZCByZXR1cm4gdHlwZVxuICAgIC8vIGZvciB2YXJpYWJsZXMgLSB0aGUgdHlwZSBvZiBhIHZhcmlhYmxlXG4gICAgaWYgKHRzLmlzVmFyaWFibGVEZWNsYXJhdGlvbihub2RlKSkge1xuICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0aGlzLnByb2dyYW0uZ2V0VHlwZUNoZWNrZXIoKTtcbiAgICAgIGNvbnN0IHZhcmlhYmxlVHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKG5vZGUpO1xuICAgICAgY29uc3QgdmFyaWFibGVUeXBlU3ltYm9sID0gdmFyaWFibGVUeXBlLmdldFN5bWJvbCgpO1xuICAgICAgaWYgKHZhcmlhYmxlVHlwZVN5bWJvbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhcmdldFN5bWJvbHNTZXQuYWRkKHZhcmlhYmxlVHlwZVN5bWJvbCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cy5mb3JFYWNoQ2hpbGQobm9kZSwgKGNoaWxkTm9kZTogdHMuTm9kZSkgPT4gdGhpcy5jb21wdXRlVHJlZUZvck5vZGUodGFyZ2V0U3ltYm9sc1NldCwgY2hpbGROb2RlLCB2aXNpdGVkU3ltYm9scykpO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21wdXRlVHJlZUZvck5vZGUodGFyZ2V0U3ltYm9sc1NldDogU2V0PHRzLlN5bWJvbD4sIG5vZGU6IHRzLk5vZGUsIHZpc2l0ZWRTeW1ib2xzOiBTZXQ8dHMuU3ltYm9sPik6IHZvaWQge1xuICAgIGlmICh0cy5pc1ZhcmlhYmxlU3RhdGVtZW50KG5vZGUpKSB7XG4gICAgICBmb3IgKGNvbnN0IHZhckRlY2xhcmF0aW9uIG9mIG5vZGUuZGVjbGFyYXRpb25MaXN0LmRlY2xhcmF0aW9ucykge1xuICAgICAgICB0aGlzLmNvbXB1dGVUcmVlRm9yTm9kZSh0YXJnZXRTeW1ib2xzU2V0LCB2YXJEZWNsYXJhdGlvbiwgdmlzaXRlZFN5bWJvbHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vZGUua2luZCA9PT0gdHMuU3ludGF4S2luZC5KU0RvYyB8fCB0cy5pc0Jsb2NrKG5vZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ2xhc3NNZW1iZXIobm9kZSkgJiYgaGFzUHJpdmF0ZUtleXdvcmQobm9kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHMuaXNJZGVudGlmaWVyKG5vZGUpKSB7XG4gICAgICBjb25zdCBzeW1ib2wgPSB0aGlzLmdldFN5bWJvbChub2RlKTtcbiAgICAgIGlmIChzeW1ib2wgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodmlzaXRlZFN5bWJvbHMuaGFzKHN5bWJvbCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2aXNpdGVkU3ltYm9scy5hZGQoc3ltYm9sKTtcblxuICAgICAgZm9yIChjb25zdCBjaGlsZFN5bWJvbCBvZiBzcGxpdFRyYW5zaWVudFN5bWJvbChzeW1ib2wsIHRoaXMucHJvZ3JhbS5nZXRUeXBlQ2hlY2tlcigpKSkge1xuICAgICAgICB0YXJnZXRTeW1ib2xzU2V0LmFkZChjaGlsZFN5bWJvbCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBleHBvcnREZWNsYXJhdGlvbiBvZiBnZXREZWNsYXJhdGlvbnNGb3JTeW1ib2woY2hpbGRTeW1ib2wpKSB7XG4gICAgICAgICAgdGhpcy5jb21wdXRlVHJlZUZvckNoaWxkcmVuKHRhcmdldFN5bWJvbHNTZXQsIGV4cG9ydERlY2xhcmF0aW9uLCB2aXNpdGVkU3ltYm9scyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVUcmVlRm9yQ2hpbGRyZW4odGFyZ2V0U3ltYm9sc1NldCwgbm9kZSwgdmlzaXRlZFN5bWJvbHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTeW1ib2wobm9kZTogdHMuTm9kZSk6IHRzLlN5bWJvbCB8IG51bGwge1xuICAgIGNvbnN0IG5vZGVTeW1ib2wgPSB0aGlzLnByb2dyYW0uZ2V0VHlwZUNoZWNrZXIoKS5nZXRTeW1ib2xBdExvY2F0aW9uKG5vZGUpO1xuICAgIGlmIChub2RlU3ltYm9sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdldEFjdHVhbFN5bWJvbChub2RlU3ltYm9sKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWN0dWFsU3ltYm9sKHN5bWJvbDogdHMuU3ltYm9sKTogdHMuU3ltYm9sIHtcbiAgICByZXR1cm4gZ2V0QWN0dWFsU3ltYm9sKHN5bWJvbCwgdGhpcy5wcm9ncmFtLmdldFR5cGVDaGVja2VyKCkpO1xuICB9XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcY29tcGlsZXJcXFxcbWFuZ2xlclwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcY29kZVxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFx0b29sc1xcXFxjb21waWxlclxcXFxtYW5nbGVyXFxcXHR5cGVzY3JpcHQtaGVscGVycy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9jb21waWxlci9tYW5nbGVyL3R5cGVzY3JpcHQtaGVscGVycy50c1wiO2ltcG9ydCB0cyBmcm9tIFwidHlwZXNjcmlwdFwiO1xuXG5jb25zdCBuYW1lZERlY2xhcmF0aW9uS2luZHMgPSBbXG4gIHRzLlN5bnRheEtpbmQuSW50ZXJmYWNlRGVjbGFyYXRpb24sXG4gIHRzLlN5bnRheEtpbmQuQ2xhc3NEZWNsYXJhdGlvbixcbiAgdHMuU3ludGF4S2luZC5FbnVtRGVjbGFyYXRpb24sXG4gIHRzLlN5bnRheEtpbmQuVHlwZUFsaWFzRGVjbGFyYXRpb24sXG4gIHRzLlN5bnRheEtpbmQuTW9kdWxlRGVjbGFyYXRpb24sXG4gIHRzLlN5bnRheEtpbmQuRnVuY3Rpb25EZWNsYXJhdGlvbixcbiAgdHMuU3ludGF4S2luZC5WYXJpYWJsZURlY2xhcmF0aW9uLFxuICB0cy5TeW50YXhLaW5kLlByb3BlcnR5U2lnbmF0dXJlLFxuICB0cy5TeW50YXhLaW5kLlBhcmFtZXRlcixcbl07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGVOYW1lZERlY2xhcmF0aW9uKG5vZGU6IHRzLk5vZGUpOiBub2RlIGlzIHRzLk5hbWVkRGVjbGFyYXRpb24ge1xuICByZXR1cm4gbmFtZWREZWNsYXJhdGlvbktpbmRzLmluZGV4T2Yobm9kZS5raW5kKSAhPT0gLTE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3R1YWxTeW1ib2woc3ltYm9sOiB0cy5TeW1ib2wsIHR5cGVDaGVja2VyOiB0cy5UeXBlQ2hlY2tlcik6IHRzLlN5bWJvbCB7XG4gIGlmIChzeW1ib2wuZmxhZ3MgJiB0cy5TeW1ib2xGbGFncy5BbGlhcykge1xuICAgIHN5bWJvbCA9IHR5cGVDaGVja2VyLmdldEFsaWFzZWRTeW1ib2woc3ltYm9sKTtcbiAgfVxuXG4gIHJldHVybiBzeW1ib2w7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFRyYW5zaWVudFN5bWJvbChzeW1ib2w6IHRzLlN5bWJvbCwgdHlwZUNoZWNrZXI6IHRzLlR5cGVDaGVja2VyKTogdHMuU3ltYm9sW10ge1xuICAvLyBhY3R1YWxseSBJIHRoaW5rIHdlIGV2ZW4gZG9uJ3QgbmVlZCB0byBvcGVyYXRlL3VzZSBcIlRyYW5zaWVudFwiIHN5bWJvbHMgYW55d2hlcmVcbiAgLy8gaXQncyBraW5kIG9mIGFsaWFzZWQgc3ltYm9sLCBidXQganVzdCBtZXJnZWRcbiAgLy8gYnV0IGl0J3MgaGFyZCB0byByZWZyYWN0b3IgZXZlcnl0aGluZyB0byB1c2UgYXJyYXkgb2Ygc3ltYm9scyBpbnN0ZWFkIG9mIGp1c3Qgc3ltYm9sXG4gIC8vIHNvIGxldCdzIGZpeCBpdCBmb3Igc29tZSBwbGFjZXNcbiAgaWYgKChzeW1ib2wuZmxhZ3MgJiB0cy5TeW1ib2xGbGFncy5UcmFuc2llbnQpID09PSAwKSB7XG4gICAgcmV0dXJuIFtzeW1ib2xdO1xuICB9XG5cbiAgLy8gXCJUcmFuc2llbnRcIiBzeW1ib2wgaXMga2luZGEgXCJtZXJnZWRcIiBzeW1ib2xcbiAgLy8gSSBkb24ndCByZWFsbHkga25vdyBpcyB0aGlzIHdheSB0byBcInNwbGl0XCIgaXMgY29ycmVjdFxuICAvLyBidXQgaXQgc2VlbXMgdGhhdCBpdCB3b3JrcyBmb3Igbm93IFx1MDBBRlxcXyhcdTMwQzQpXy9cdTAwQUZcbiAgY29uc3QgZGVjbGFyYXRpb25zID0gZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sKHN5bWJvbCk7XG4gIGNvbnN0IHJlc3VsdDogdHMuU3ltYm9sW10gPSBbXTtcbiAgZm9yIChjb25zdCBkZWNsYXJhdGlvbiBvZiBkZWNsYXJhdGlvbnMpIHtcbiAgICBpZiAoIWlzTm9kZU5hbWVkRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pIHx8IGRlY2xhcmF0aW9uLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3ltID0gdHlwZUNoZWNrZXIuZ2V0U3ltYm9sQXRMb2NhdGlvbihkZWNsYXJhdGlvbi5uYW1lKTtcbiAgICBpZiAoc3ltID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHJlc3VsdC5wdXNoKGdldEFjdHVhbFN5bWJvbChzeW0sIHR5cGVDaGVja2VyKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25zRm9yU3ltYm9sKHN5bWJvbDogdHMuU3ltYm9sKTogdHMuRGVjbGFyYXRpb25bXSB7XG4gIGNvbnN0IHJlc3VsdDogdHMuRGVjbGFyYXRpb25bXSA9IFtdO1xuXG4gIGlmIChzeW1ib2wuZGVjbGFyYXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXN1bHQucHVzaCguLi5zeW1ib2wuZGVjbGFyYXRpb25zKTtcbiAgfVxuXG4gIGlmIChzeW1ib2wudmFsdWVEZWNsYXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gcHVzaCB2YWx1ZURlY2xhcmF0aW9uIG1pZ2h0IGJlIGFscmVhZHkgaW4gZGVjbGFyYXRpb25zIGFycmF5XG4gICAgLy8gc28gbGV0J3MgY2hlY2sgZmlyc3QgdG8gYXZvaWQgZHVwbGljYXRpb24gbm9kZXNcbiAgICBpZiAoIXJlc3VsdC5pbmNsdWRlcyhzeW1ib2wudmFsdWVEZWNsYXJhdGlvbikpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHN5bWJvbC52YWx1ZURlY2xhcmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwb3J0c0ZvclNvdXJjZUZpbGUodHlwZUNoZWNrZXI6IHRzLlR5cGVDaGVja2VyLCBzb3VyY2VGaWxlU3ltYm9sOiB0cy5TeW1ib2wpOiB0cy5TeW1ib2xbXSB7XG4gIGlmIChzb3VyY2VGaWxlU3ltYm9sLmV4cG9ydHMgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNvbW1vbkpzRXhwb3J0ID0gc291cmNlRmlsZVN5bWJvbC5leHBvcnRzLmdldCh0cy5JbnRlcm5hbFN5bWJvbE5hbWUuRXhwb3J0RXF1YWxzKTtcbiAgICBpZiAoY29tbW9uSnNFeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtnZXRBY3R1YWxTeW1ib2woY29tbW9uSnNFeHBvcnQsIHR5cGVDaGVja2VyKV07XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVzdWx0OiB0cy5TeW1ib2xbXSA9IHR5cGVDaGVja2VyLmdldEV4cG9ydHNPZk1vZHVsZShzb3VyY2VGaWxlU3ltYm9sKTtcblxuICBpZiAoc291cmNlRmlsZVN5bWJvbC5leHBvcnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBkZWZhdWx0RXhwb3J0U3ltYm9sID0gc291cmNlRmlsZVN5bWJvbC5leHBvcnRzLmdldCh0cy5JbnRlcm5hbFN5bWJvbE5hbWUuRGVmYXVsdCk7XG4gICAgaWYgKGRlZmF1bHRFeHBvcnRTeW1ib2wgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCFyZXN1bHQuaW5jbHVkZXMoZGVmYXVsdEV4cG9ydFN5bWJvbCkpIHtcbiAgICAgICAgLy8gaXQgc2VlbXMgdGhhdCBkZWZhdWx0IGV4cG9ydCBpcyBhbHdheXMgcmV0dXJuZWQgYnkgZ2V0RXhwb3J0c09mTW9kdWxlXG4gICAgICAgIC8vIGJ1dCBsZXQncyBhZGQgaXQgdG8gYmUgc3VyZSBhZGQgaWYgdGhlcmUgaXMgbm8gc3VjaCBleHBvcnRcbiAgICAgICAgcmVzdWx0LnB1c2goZGVmYXVsdEV4cG9ydFN5bWJvbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC5tYXAoKHN5bWJvbDogdHMuU3ltYm9sKSA9PiBnZXRBY3R1YWxTeW1ib2woc3ltYm9sLCB0eXBlQ2hlY2tlcikpO1xufVxuXG5leHBvcnQgdHlwZSBDbGFzc01lbWJlciA9XG4gIHwgdHMuTWV0aG9kRGVjbGFyYXRpb25cbiAgfCB0cy5Qcm9wZXJ0eURlY2xhcmF0aW9uXG4gIHwgdHMuR2V0QWNjZXNzb3JEZWNsYXJhdGlvblxuICB8IHRzLlNldEFjY2Vzc29yRGVjbGFyYXRpb247XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NsYXNzTWVtYmVyKG5vZGU6IHRzLk5vZGUpOiBub2RlIGlzIENsYXNzTWVtYmVyIHtcbiAgcmV0dXJuIChcbiAgICB0cy5pc01ldGhvZERlY2xhcmF0aW9uKG5vZGUpIHx8IHRzLmlzUHJvcGVydHlEZWNsYXJhdGlvbihub2RlKSB8fCB0cy5pc0dldEFjY2Vzc29yKG5vZGUpIHx8IHRzLmlzU2V0QWNjZXNzb3Iobm9kZSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENsYXNzT2ZNZW1iZXJTeW1ib2woXG4gIG5vZGVTeW1ib2w6IHRzLlN5bWJvbCxcbik6IHRzLkNsYXNzTGlrZURlY2xhcmF0aW9uIHwgdHMuT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24gfCB0cy5UeXBlTGl0ZXJhbE5vZGUgfCB0cy5JbnRlcmZhY2VEZWNsYXJhdGlvbiB8IG51bGwge1xuICBjb25zdCBjbGFzc01lbWJlcnMgPSBnZXRDbGFzc01lbWJlckRlY2xhcmF0aW9ucyhub2RlU3ltYm9sKTtcbiAgaWYgKGNsYXNzTWVtYmVycy5sZW5ndGggIT09IDApIHtcbiAgICAvLyB3ZSBuZWVkIGFueSBtZW1iZXIgdG8gZ2V0IGNsYXNzJyBkZWNsYXJhdGlvblxuICAgIGNvbnN0IGNsYXNzTWVtYmVyID0gY2xhc3NNZW1iZXJzWzBdO1xuICAgIGlmIChpc0NvbnN0cnVjdG9yUGFyYW1ldGVyKGNsYXNzTWVtYmVyKSkge1xuICAgICAgcmV0dXJuIChjbGFzc01lbWJlci5wYXJlbnQgYXMgdHMuQ29uc3RydWN0b3JEZWNsYXJhdGlvbikucGFyZW50O1xuICAgIH1cblxuICAgIC8vIHdlJ3JlIHN1cmUgdGhhdCBpdCBpcyBhIGNsYXNzLCBub3QgaW50ZXJmYWNlXG4gICAgcmV0dXJuIGNsYXNzTWVtYmVyLnBhcmVudCBhcyB0cy5DbGFzc0xpa2VEZWNsYXJhdGlvbiB8IHRzLk9iamVjdExpdGVyYWxFeHByZXNzaW9uO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNQcml2YXRlS2V5d29yZChub2RlOiBDbGFzc01lbWJlciB8IHRzLlBhcmFtZXRlckRlY2xhcmF0aW9uKTogYm9vbGVhbiB7XG4gIHJldHVybiBoYXNNb2RpZmllcihub2RlLCB0cy5TeW50YXhLaW5kLlByaXZhdGVLZXl3b3JkKTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuZnVuY3Rpb24gZ2V0TW9kaWZpZXJzKG5vZGU6IHRzLk5vZGUpOiByZWFkb25seSB0cy5Nb2RpZmllcltdIHtcbiAgaWYgKGlzQnJlYWtpbmdUeXBlU2NyaXB0QXBpKHRzKSkge1xuICAgIGlmICghdHMuY2FuSGF2ZU1vZGlmaWVycyhub2RlKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0cy5nZXRNb2RpZmllcnMobm9kZSkgfHwgW107XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gIC8vIEB0cy1pZ25vcmVcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICByZXR1cm4gbm9kZS5tb2RpZmllcnMgfHwgW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNNb2RpZmllcihub2RlOiB0cy5Ob2RlLCBtb2RpZmllcjogdHMuU3ludGF4S2luZCk6IGJvb2xlYW4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gIHJldHVybiBnZXRNb2RpZmllcnMobm9kZSkuc29tZSgobW9kKSA9PiBtb2Qua2luZCA9PT0gbW9kaWZpZXIpO1xufVxuXG5mdW5jdGlvbiBnZXREZWNvcmF0b3JzKG5vZGU6IHRzLk5vZGUpOiByZWFkb25seSB1bmtub3duW10ge1xuICBpZiAoaXNCcmVha2luZ1R5cGVTY3JpcHRBcGkodHMpKSB7XG4gICAgaWYgKCF0cy5jYW5IYXZlRGVjb3JhdG9ycyhub2RlKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0cy5nZXREZWNvcmF0b3JzKG5vZGUpIHx8IFtdO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAvLyBAdHMtaWdub3JlXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cbiAgcmV0dXJuIG5vZGUuZGVjb3JhdG9ycyB8fCBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0RlY29yYXRvcnMobm9kZTogdHMuTm9kZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gZ2V0RGVjb3JhdG9ycyhub2RlKS5sZW5ndGggIT09IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yUGFyYW1ldGVyKG5vZGU6IHRzLk5vZGUpOiBub2RlIGlzIHRzLlBhcmFtZXRlckRlY2xhcmF0aW9uIHtcbiAgcmV0dXJuIChcbiAgICB0cy5pc1BhcmFtZXRlcihub2RlKSAmJlxuICAgIHRzLmlzQ29uc3RydWN0b3JEZWNsYXJhdGlvbihub2RlLnBhcmVudCBhcyB0cy5Ob2RlKSAmJlxuICAgIChoYXNNb2RpZmllcihub2RlLCB0cy5TeW50YXhLaW5kLlB1YmxpY0tleXdvcmQpIHx8XG4gICAgICBoYXNNb2RpZmllcihub2RlLCB0cy5TeW50YXhLaW5kLlByb3RlY3RlZEtleXdvcmQpIHx8XG4gICAgICBoYXNNb2RpZmllcihub2RlLCB0cy5TeW50YXhLaW5kLlByaXZhdGVLZXl3b3JkKSB8fFxuICAgICAgaGFzTW9kaWZpZXIobm9kZSwgdHMuU3ludGF4S2luZC5SZWFkb25seUtleXdvcmQpKVxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRDbGFzc01lbWJlckRlY2xhcmF0aW9ucyhzeW1ib2w6IHRzLlN5bWJvbCB8IHVuZGVmaW5lZCk6IChDbGFzc01lbWJlciB8IHRzLlBhcmFtZXRlckRlY2xhcmF0aW9uKVtdIHtcbiAgaWYgKHN5bWJvbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgZGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICBpZiAoZGVjbGFyYXRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICByZXR1cm4gZGVjbGFyYXRpb25zLmZpbHRlcigoeDogdHMuRGVjbGFyYXRpb24pOiB4IGlzIENsYXNzTWVtYmVyIHwgdHMuUGFyYW1ldGVyRGVjbGFyYXRpb24gPT4ge1xuICAgIHJldHVybiBpc0NsYXNzTWVtYmVyKHgpIHx8IGlzQ29uc3RydWN0b3JQYXJhbWV0ZXIoeCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTeW1ib2xDbGFzc01lbWJlcihzeW1ib2w6IHRzLlN5bWJvbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZ2V0Q2xhc3NNZW1iZXJEZWNsYXJhdGlvbnMoc3ltYm9sKS5sZW5ndGggIT09IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaXZhdGVDbGFzc01lbWJlcihzeW1ib2w6IHRzLlN5bWJvbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZ2V0Q2xhc3NNZW1iZXJEZWNsYXJhdGlvbnMoc3ltYm9sKS5zb21lKGhhc1ByaXZhdGVLZXl3b3JkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVKU0RvY0NvbW1lbnQobm9kZTogdHMuTm9kZSk6IHN0cmluZyB7XG4gIGNvbnN0IHN0YXJ0ID0gbm9kZS5nZXRTdGFydCgpO1xuICBjb25zdCBqc0RvY1N0YXJ0ID0gbm9kZS5nZXRTdGFydCh1bmRlZmluZWQsIHRydWUpO1xuICByZXR1cm4gbm9kZS5nZXRTb3VyY2VGaWxlKCkuZ2V0RnVsbFRleHQoKS5zdWJzdHJpbmcoanNEb2NTdGFydCwgc3RhcnQpLnRyaW0oKTtcbn1cblxuLy8gZGVjb3JhdG9ycyBhbmQgbW9kaWZpZXJzLXJlbGF0ZWQgYXBpIGFkZGVkIGluIHRzIDQuOFxuaW50ZXJmYWNlIEJyZWFraW5nVHlwZVNjcmlwdEFwaSB7XG4gIGNhbkhhdmVEZWNvcmF0b3JzKG5vZGU6IHRzLk5vZGUpOiBib29sZWFuO1xuICBnZXREZWNvcmF0b3JzKG5vZGU6IHRzLk5vZGUpOiByZWFkb25seSB0cy5EZWNvcmF0b3JbXSB8IHVuZGVmaW5lZDtcbiAgY2FuSGF2ZU1vZGlmaWVycyhub2RlOiB0cy5Ob2RlKTogYm9vbGVhbjtcbiAgZ2V0TW9kaWZpZXJzKG5vZGU6IHRzLk5vZGUpOiByZWFkb25seSB0cy5Nb2RpZmllcltdIHwgdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc0JyZWFraW5nVHlwZVNjcmlwdEFwaShjb21waWxlcjogb2JqZWN0KTogY29tcGlsZXIgaXMgQnJlYWtpbmdUeXBlU2NyaXB0QXBpIHtcbiAgcmV0dXJuIFwiY2FuSGF2ZURlY29yYXRvcnNcIiBpbiBjb21waWxlcjtcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRDpcXFxcY29kZVxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFx0b29sc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcY29kZVxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFxjYXQtc3Vydml2b3JzLW1hc3RlclxcXFx0b29sc1xcXFxhZHZ6aXAudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Q6L2NvZGUvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvY2F0LXN1cnZpdm9ycy1tYXN0ZXIvdG9vbHMvYWR2emlwLnRzXCI7aW1wb3J0IHsgZXhlY0ZpbGVTeW5jIH0gZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgc3RhdFN5bmMgfSBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0IGFkdnppcCBmcm9tIFwiYWR2emlwLWJpblwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW4gfSBmcm9tIFwidml0ZVwiO1xuLy8gaW1wb3J0IHsgYWRkRGVmYXVsdFZhbHVlcywgcHJpbnRKczEza1N0YXRzIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR2emlwT3B0aW9ucyB7XG4gIHBlZGFudGljPzogYm9vbGVhbjtcbiAgc2hyaW5rTGV2ZWw/OlxuICAgIHwgMFxuICAgIHwgMVxuICAgIHwgMlxuICAgIHwgM1xuICAgIHwgNFxuICAgIHwgXCJzdG9yZVwiXG4gICAgfCBcImZhc3RcIlxuICAgIHwgXCJub3JtYWxcIlxuICAgIHwgXCJleHRyYVwiXG4gICAgfCBcImluc2FuZVwiO1xufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdEFkdnppcE9wdGlvbnM6IEFkdnppcE9wdGlvbnMgPSB7XG4gIHNocmlua0xldmVsOiBcImluc2FuZVwiLFxuICBwZWRhbnRpYzogdHJ1ZSxcbn07XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgYWR2emlwIHBsdWdpbiB0aGF0IHVzZXMgQWR2YW5jZUNPTVAgdG8gb3B0aW1pemUgdGhlIHppcCBmaWxlLlxuICogQHJldHVybnMgVGhlIGFkdnppcCBwbHVnaW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZHZ6aXBQbHVnaW4oXG4gIG9wdGlvbnM6IEFkdnppcE9wdGlvbnMgPSBkZWZhdWx0QWR2emlwT3B0aW9uc1xuKTogUGx1Z2luIHtcbiAgY29uc3QgYWR2emlwT3B0aW9ucyA9IG9wdGlvbnM7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJ2aXRlOmFkdnppcFwiLFxuICAgIGFwcGx5OiBcImJ1aWxkXCIsXG4gICAgZW5mb3JjZTogXCJwb3N0XCIsXG4gICAgY2xvc2VCdW5kbGU6IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXCItLXJlY29tcHJlc3NcIl07XG4gICAgICAgIGlmIChhZHZ6aXBPcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgICAgYXJncy5wdXNoKFwiLS1wZWRhbnRpY1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWR2emlwT3B0aW9ucy5zaHJpbmtMZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhZHZ6aXBPcHRpb25zLnNocmlua0xldmVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBhcmdzLnB1c2goYC0ke2FkdnppcE9wdGlvbnMuc2hyaW5rTGV2ZWx9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaChgLS1zaHJpbmstJHthZHZ6aXBPcHRpb25zLnNocmlua0xldmVsfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhcmdzLnB1c2goXCJkaXN0L2luZGV4LnppcFwiKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXhlY0ZpbGVTeW5jKGFkdnppcCwgYXJncyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC50b1N0cmluZygpLnRyaW0oKSk7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gc3RhdFN5bmMoXCJkaXN0L2luZGV4LnppcFwiKTtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiYWR2emlwIFpJUFwiLCBzdGF0cy5zaXplKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcImFkdnppcCBlcnJvclwiLCBlcnIpO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxcZXRjLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9jb2RlL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL3Rvb2xzL2V0Yy50c1wiO2ltcG9ydCB7IGV4ZWNGaWxlU3luYyB9IGZyb20gXCJub2RlOmNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7IHN0YXRTeW5jIH0gZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCBlY3QgZnJvbSBcImVjdC1iaW5cIjtcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgeyBnbG9iIH0gZnJvbSBcImdsb2JcIjtcbi8qKlxuICogRWZmaWNpZW50IENvbXByZXNzaW9uIFRvb2wgKEVDVCkgb3B0aW9ucy5cbiAqXG4gKiBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9maGFuYXUvRWZmaWNpZW50LUNvbXByZXNzaW9uLVRvb2xcbiAqXG4gKiBEb2N1bWVudGF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vZmhhbmF1L0VmZmljaWVudC1Db21wcmVzc2lvbi1Ub29sL2Jsb2IvbWFzdGVyL2RvYy9NYW51YWwuZG9jeFxuICpcbiAqIFZpZXdhYmxlIGluIEdvb2dsZSBEb2NzOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzEwdmJzQTRCcUtka0dGSDlfRTFiUVZoeVg3RVdiSEtjVy9lZGl0P3VzcD1zaGFyaW5nJm91aWQ9MTA4Mzk4MjMwNzA0NDIzMzAxMzMzJnJ0cG9mPXRydWUmc2Q9dHJ1ZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVjdE9wdGlvbnMge1xuICAvKipcbiAgICogU2hvdyBubyByZXBvcnQgd2hlbiBwcm9ncmFtIGlzIGZpbmlzaGVkOyBwcmludCBvbmx5IHdhcm5pbmdzIGFuZCBlcnJvcnMuXG4gICAqL1xuICBxdWlldD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNlbGVjdCBjb21wcmVzc2lvbiBsZXZlbCBbMS05XSAoRUNUIGRlZmF1bHQ6IDMsIEpTMTNrIGRlZmF1bHQ6IDEwMDA5KS5cbiAgICpcbiAgICogRm9yIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHBlcmZvcm1hbmNlIHJlYWQgUGVyZm9ybWFuY2UuaHRtbC5cbiAgICpcbiAgICogQWR2YW5jZWQgdXNhZ2U6XG4gICAqIEEgZGlmZmVyZW50IHN5bnRheCBtYXkgYmUgdXNlZCB0byBhY2hpZXZlIGV2ZW4gbW9yZSBjb21wcmVzc2lvbiBmb3IgZGVmbGF0ZSBjb21wcmVzc2lvblxuICAgKiBpZiB0aW1lIChhbmQgZWZmaWNpZW5jeSkgaXMgbm90IGEgY29uY2Vybi5cbiAgICogSWYgdGhlIHZhbHVlIGlzIGFib3ZlIDEwMDAwLCB0aGUgYmxvY2tzcGxpdHRpbmctY29tcHJlc3Npb24gY3ljbGUgaXMgcmVwZWF0ZWQgIyAvIDEwMDAwIHRpbWVzLlxuICAgKiBJZiAjICUgMTAwMDAgaXMgYWJvdmUgOSwgbGV2ZWwgOSBpcyB1c2VkIGFuZCB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgb2YgZGVmbGF0ZSBjb21wcmVzc2lvblxuICAgKiBwZXIgYmxvY2sgaXMgc2V0IHRvICMgJSAxMDAwMC4gSWYgIyAlIDEwMDAwIGlzIDkgb3IgYmVsb3csIHRoaXMgbnVtYmVyIHNwZWNpZmllcyB0aGUgbGV2ZWwuXG4gICAqL1xuICBsZXZlbD86IG51bWJlcjtcblxuICAvKipcbiAgICogRGlzY2FyZCBtZXRhZGF0YS4gKGRlZmF1bHQgdHJ1ZSkuXG4gICAqL1xuICBzdHJpcD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEtlZXAgdGhlIGZpbGUgbW9kaWZpY2F0aW9uIHRpbWUuIChkZWZhdWx0IGZhbHNlKS5cbiAgICovXG4gIGtlZXA/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFbmFibGUgc3RyaWN0IGxvc3NsZXNzbmVzcy4gV2l0aG91dCB0aGlzLCBpbWFnZSBkYXRhIHVuZGVyIGZ1bGx5IHRyYW5zcGFyZW50IHBpeGVscyBjYW4gYmVcbiAgICogbW9kaWZpZWQgdG8gaW5jcmVhc2UgY29tcHJlc3Npb24uIFRoaXMgZGF0YSBpcyBub3JtYWxseSBpbnZpc2libGUgYW5kIG5vdCBuZWVkZWQuXG4gICAqIEhvd2V2ZXIsIHlvdSBtYXkgd2FudCB0byB1c2UgdGhpcyBvcHRpb24gaWYgeW91IGFyZSBzdGlsbCBnb2luZyB0byBlZGl0IHRoZSBpbWFnZS5cbiAgICpcbiAgICogQWxzbyBwcmVzZXJ2ZXMgcmFyZWx5IHVzZWQgR1pJUCBtZXRhZGF0YS5cbiAgICpcbiAgICogKGRlZmF1bHQgZmFsc2UpLlxuICAgKi9cbiAgc3RyaWN0PzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IEVmZmljaWVudCBDb21wcmVzc2lvbiBUb29sIChFQ1QpIG9wdGlvbnMuXG4gKlxuICogTGV2ZWwgMTAwMDkgaXMgdGhlIHJlY29tbWVuZGVkIHZhbHVlIGZvciBKUzEzayBnYW1lcy4gVGhpcyB3aWxsIGJlIHNsb3cgYnV0IHdpbGwgcHJvZHVjZSB0aGUgc21hbGxlc3QgZmlsZSBzaXplLlxuICpcbiAqIFN0cmlwIGlzIHRydWUgYnkgZGVmYXVsdCBiZWNhdXNlIG1ldGFkYXRhIGlzIG5vdCBuZWVkZWQgZm9yIEpTMTNrIGdhbWVzLlxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEVjdE9wdGlvbnM6IEVjdE9wdGlvbnMgPSB7XG4gIGxldmVsOiAxMDAwOSxcbiAgc3RyaXA6IHRydWUsXG4gIGtlZXA6IGZhbHNlLFxuICBzdHJpY3Q6IGZhbHNlLFxufTtcblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBFQ1QgcGx1Z2luIHRoYXQgdXNlcyBFZmZpY2llbnQtQ29tcHJlc3Npb24tVG9vbCB0byBidWlsZCBhIHppcCBmaWxlLlxuICogQHJldHVybnMgVGhlIEVDVCBwbHVnaW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlY3RQbHVnaW4ob3B0aW9uczogRWN0T3B0aW9ucyA9IGRlZmF1bHRFY3RPcHRpb25zKTogUGx1Z2luIHtcbiAgY29uc3QgZWN0T3B0aW9ucyA9IG9wdGlvbnM7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJ2aXRlOmVjdFwiLFxuICAgIGFwcGx5OiBcImJ1aWxkXCIsXG4gICAgZW5mb3JjZTogXCJwb3N0XCIsXG4gICAgY2xvc2VCdW5kbGU6IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIC8vIExpc3QgZmlsZXMgaW4gZGlzdCBkaXJlY3RvcnlcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgLmh0bWwgZmlsZSBpcyBmaXJzdFxuICAgICAgY29uc3QgZmlsZXMgPSBnbG9iXG4gICAgICAgIC5zeW5jKFwiZGlzdC8qKi8qXCIsIHsgbm9kaXI6IHRydWUgfSlcbiAgICAgICAgLnNvcnQoKGEpID0+IChhLmVuZHNXaXRoKFwiLmh0bWxcIikgPyAtMSA6IDEpKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXTtcbiAgICAgICAgaWYgKGVjdE9wdGlvbnMucXVpZXQpIHtcbiAgICAgICAgICBhcmdzLnB1c2goXCItcXVpZXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVjdE9wdGlvbnMubGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGFyZ3MucHVzaChgLSR7ZWN0T3B0aW9ucy5sZXZlbH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWN0T3B0aW9ucy5zdHJpcCkge1xuICAgICAgICAgIGFyZ3MucHVzaChcIi1zdHJpcFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWN0T3B0aW9ucy5rZWVwKSB7XG4gICAgICAgICAgYXJncy5wdXNoKFwiLWtlZXBcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVjdE9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICAgICAgYXJncy5wdXNoKFwiLXN0cmljdFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLnB1c2goXCItemlwXCIpO1xuICAgICAgICBjb25zb2xlLmluZm8oLi4uZmlsZXMpO1xuICAgICAgICBhcmdzLnB1c2goLi4uZmlsZXMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBleGVjRmlsZVN5bmMoZWN0LCBhcmdzKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJFQ1QgcmVzdWx0XCIsIHJlc3VsdC50b1N0cmluZygpLnRyaW0oKSk7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gc3RhdFN5bmMoXCJkaXN0L2luZGV4LnppcFwiKTtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiRUNUIFpJUFwiLCBzdGF0cy5zaXplKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVDVCBlcnJvclwiLCBlcnIpO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkQ6XFxcXGNvZGVcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcY2F0LXN1cnZpdm9ycy1tYXN0ZXJcXFxcdG9vbHNcXFxccm9hZHJvbGxlci50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovY29kZS9jYXQtc3Vydml2b3JzLW1hc3Rlci9jYXQtc3Vydml2b3JzLW1hc3Rlci90b29scy9yb2Fkcm9sbGVyLnRzXCI7aW1wb3J0IENsZWFuQ1NTIGZyb20gXCJjbGVhbi1jc3NcIjtcbmltcG9ydCBodG1sTWluaWZ5LCB7IE9wdGlvbnMgYXMgSHRtbE1pbmlmeU9wdGlvbnMgfSBmcm9tIFwiaHRtbC1taW5pZmllci10ZXJzZXJcIjtcbmltcG9ydCB7XG4gIElucHV0LFxuICBJbnB1dEFjdGlvbixcbiAgSW5wdXRUeXBlLFxuICBQYWNrZXIsXG4gIFBhY2tlck9wdGlvbnMsXG4gIGRlZmF1bHRTcGFyc2VTZWxlY3RvcnMsXG59IGZyb20gXCJyb2Fkcm9sbGVyXCI7XG5pbXBvcnQgeyBPdXRwdXRBc3NldCwgT3V0cHV0Q2h1bmsgfSBmcm9tIFwicm9sbHVwXCI7XG5pbXBvcnQgeyBJbmRleEh0bWxUcmFuc2Zvcm1Db250ZXh0LCBQbHVnaW4gfSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IHsgZXNjYXBlUmVnRXhwIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IHdyaXRlRmlsZVN5bmMgfSBmcm9tIFwibm9kZTpmc1wiO1xuXG5leHBvcnQgdHlwZSBSb2Fkcm9sbGVyT3B0aW9ucyA9IFBhY2tlck9wdGlvbnM7XG5cbmNvbnN0IE9QVElNSVpFID0gMztcbmV4cG9ydCBjb25zdCBkZWZhdWx0Um9hZHJvbGxlck9wdGlvbnM6IFJvYWRyb2xsZXJPcHRpb25zID0ge1xuICBhbGxvd0ZyZWVWYXJzOiB0cnVlLFxuICAvLyBkeW5hbWljTW9kZWxzOiAxLFxuICAvLyBwcmVjaXNpb246IDE2LFxuICBtYXhNZW1vcnlNQjogNTEyLFxuICAvLyBzcGFyc2VTZWxlY3RvcnM6IGRlZmF1bHRTcGFyc2VTZWxlY3RvcnMoMjQpLFxufTtcblxuZXhwb3J0IHR5cGUgeyBIdG1sTWluaWZ5T3B0aW9ucyB9O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEh0bWxNaW5pZnlPcHRpb25zOiBIdG1sTWluaWZ5T3B0aW9ucyA9IHtcbiAgaW5jbHVkZUF1dG9HZW5lcmF0ZWRUYWdzOiB0cnVlLFxuICByZW1vdmVBdHRyaWJ1dGVRdW90ZXM6IHRydWUsXG4gIHJlbW92ZUNvbW1lbnRzOiB0cnVlLFxuICByZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzOiB0cnVlLFxuICByZW1vdmVTY3JpcHRUeXBlQXR0cmlidXRlczogdHJ1ZSxcbiAgcmVtb3ZlU3R5bGVMaW5rVHlwZUF0dHJpYnV0ZXM6IHRydWUsXG4gIHNvcnRDbGFzc05hbWU6IHRydWUsXG4gIHVzZVNob3J0RG9jdHlwZTogdHJ1ZSxcbiAgY29sbGFwc2VXaGl0ZXNwYWNlOiB0cnVlLFxuICBjb2xsYXBzZUlubGluZVRhZ1doaXRlc3BhY2U6IHRydWUsXG4gIHJlbW92ZUVtcHR5QXR0cmlidXRlczogdHJ1ZSxcbiAgcmVtb3ZlT3B0aW9uYWxUYWdzOiB0cnVlLFxuICBzb3J0QXR0cmlidXRlczogdHJ1ZSxcbn07XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgUm9hZHJvbGxlciBwbHVnaW4gdGhhdCBjcnVuY2hlcyB0aGUgSlMgYW5kIENTUy5cbiAqXG4gKiBCYXNlZCBvbiBSb2IgTG91aWUncyByZWNvbW1lbmRhdGlvbnM6XG4gKiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9jb2R5ZWJiZXJzb24vanMxM2stc3RhcnRlci0yMDIyL3B1bGwvMVxuICpcbiAqIEByZXR1cm5zIFRoZSByb2Fkcm9sbGVyIHBsdWdpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvYWRyb2xsZXJQbHVnaW4oXG4gIHJvYWRyb2xsZXJPcHRpb25zOiBSb2Fkcm9sbGVyT3B0aW9ucyA9IGRlZmF1bHRSb2Fkcm9sbGVyT3B0aW9ucyxcbiAgaHRtbE1pbmlmeU9wdGlvbnM6IEh0bWxNaW5pZnlPcHRpb25zID0gZGVmYXVsdEh0bWxNaW5pZnlPcHRpb25zXG4pOiBQbHVnaW4ge1xuICBjb25zdCBmdWxsUm9hZHJvbGxlck9wdGlvbnMgPSByb2Fkcm9sbGVyT3B0aW9ucztcbiAgY29uc3QgZnVsbEh0bWxNaW5pZnlPcHRpb25zID0gaHRtbE1pbmlmeU9wdGlvbnM7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJ2aXRlOnJvYWRyb2xsZXJcIixcbiAgICB0cmFuc2Zvcm1JbmRleEh0bWw6IHtcbiAgICAgIGhhbmRsZXI6IGFzeW5jIChcbiAgICAgICAgaHRtbDogc3RyaW5nLFxuICAgICAgICBjdHg/OiBJbmRleEh0bWxUcmFuc2Zvcm1Db250ZXh0XG4gICAgICApOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgICAgICAvLyBPbmx5IHVzZSB0aGlzIHBsdWdpbiBkdXJpbmcgYnVpbGRcbiAgICAgICAgaWYgKCFjdHggfHwgIWN0eC5idW5kbGUpIHtcbiAgICAgICAgICByZXR1cm4gaHRtbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSBodG1sO1xuXG4gICAgICAgIGNvbnN0IGJ1bmRsZUtleXMgPSBPYmplY3Qua2V5cyhjdHguYnVuZGxlKTtcblxuICAgICAgICBjb25zdCBjc3NLZXkgPSBidW5kbGVLZXlzLmZpbmQoKGtleSkgPT4ga2V5LmVuZHNXaXRoKFwiLmNzc1wiKSk7XG4gICAgICAgIGlmIChjc3NLZXkpIHtcbiAgICAgICAgICByZXN1bHQgPSBlbWJlZENzcyhyZXN1bHQsIGN0eC5idW5kbGVbY3NzS2V5XSBhcyBPdXRwdXRBc3NldCk7XG4gICAgICAgICAgZGVsZXRlIGN0eC5idW5kbGVbY3NzS2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGh0bWxNaW5pZnkubWluaWZ5KHJlc3VsdCwgZnVsbEh0bWxNaW5pZnlPcHRpb25zKTtcblxuICAgICAgICBjb25zdCBqc0tleSA9IGJ1bmRsZUtleXMuZmluZCgoa2V5KSA9PiBrZXkuZW5kc1dpdGgoXCIuanNcIikpO1xuICAgICAgICBpZiAoanNLZXkpIHtcbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBlbWJlZEpzKFxuICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgY3R4LmJ1bmRsZVtqc0tleV0gYXMgT3V0cHV0Q2h1bmssXG4gICAgICAgICAgICBmdWxsUm9hZHJvbGxlck9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICAgIGRlbGV0ZSBjdHguYnVuZGxlW2pzS2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgIH0sXG4gIH07XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gSmF2YVNjcmlwdCBjb2RlIGludG8gYSBwYWNrZWQgdmVyc2lvbi5cbiAqIEBwYXJhbSBodG1sIFRoZSBvcmlnaW5hbCBIVE1MLlxuICogQHBhcmFtIGNodW5rIFRoZSBKYXZhU2NyaXB0IG91dHB1dCBjaHVuayBmcm9tIFJvbGx1cC9WaXRlLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybWVkIEhUTUwgd2l0aCB0aGUgSmF2YVNjcmlwdCBlbWJlZGRlZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW1iZWRKcyhcbiAgaHRtbDogc3RyaW5nLFxuICBjaHVuazogT3V0cHV0Q2h1bmssXG4gIG9wdGlvbnM6IFJvYWRyb2xsZXJPcHRpb25zXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBzY3JpcHRUYWdSZW1vdmVkID0gaHRtbC5yZXBsYWNlKFxuICAgIG5ldyBSZWdFeHAoYDxzY3JpcHRbXj5dKj8ke2VzY2FwZVJlZ0V4cChjaHVuay5maWxlTmFtZSl9W14+XSo/Pjwvc2NyaXB0PmApLFxuICAgIFwiXCJcbiAgKTtcbiAgY29uc3QgaHRtbEluSnMgPSBgZG9jdW1lbnQud3JpdGUoXFxgJHtzY3JpcHRUYWdSZW1vdmVkfVxcYCk7JHtjaHVuay5jb2RlLnRyaW0oKX1gO1xuICBjb25zdCBieXBhc3NSb2FkUm9sbGVyID0gZmFsc2U7XG4gIHdyaXRlRmlsZVN5bmMoXCJidWlsZC9taW5pbWlmaWVkLmpzXCIsIGh0bWxJbkpzKTtcbiAgaWYgKGJ5cGFzc1JvYWRSb2xsZXIpIHtcbiAgICByZXR1cm4gYDxzY3JpcHQ+JHtodG1sSW5Kc308L3NjcmlwdD5gO1xuICB9XG4gIGNvbnN0IGlucHV0czogSW5wdXRbXSA9IFtcbiAgICB7XG4gICAgICBkYXRhOiBodG1sSW5KcyxcbiAgICAgIHR5cGU6IFwianNcIiBhcyBJbnB1dFR5cGUsXG4gICAgICBhY3Rpb246IFwiZXZhbFwiIGFzIElucHV0QWN0aW9uLFxuICAgIH0sXG4gIF07XG4gIC8vIGNvbnNvbGUuaW5mbyhpbnB1dHMpO1xuICBjb25zdCBwYWNrZXIgPSBuZXcgUGFja2VyKGlucHV0cywgb3B0aW9ucyk7XG4gIGxldCBzdGFydFNpemUgPSBpbnB1dHNbMF0uZGF0YS5sZW5ndGg7XG4gIGxldCBiZXN0U2l6ZSA9IDA7XG4gIGxldCBiZXN0SXRlcmF0aW9ucyA9IDA7XG4gIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiXFxuXCIpO1xuICBhd2FpdCBwYWNrZXIub3B0aW1pemUoT1BUSU1JWkUsIChwKSA9PiB7XG4gICAgaWYgKHAuYmVzdFVwZGF0ZWQpIHtcbiAgICAgIGJlc3RTaXplID0gcC5iZXN0U2l6ZTtcbiAgICAgICsrYmVzdEl0ZXJhdGlvbnM7XG4gICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIndvcmtpbmcuLi4gXCIgKyBwLmJlc3RTaXplICsgXCJcXHJcIik7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgeyBmaXJzdExpbmUsIHNlY29uZExpbmUgfSA9IHBhY2tlci5tYWtlRGVjb2RlcigpO1xuICBjb25zdCByZXN1bHRIdG1sID0gYDxzY3JpcHQ+JHtmaXJzdExpbmV9JHtzZWNvbmRMaW5lfTwvc2NyaXB0PmA7XG4gIGNvbnNvbGUuaW5mbyhcIlN0YXJ0IFNpemU6IFwiICsgc3RhcnRTaXplKTtcbiAgY29uc29sZS5pbmZvKFwiQmVzdCBTaXplOiBcIiArIGJlc3RTaXplKTtcbiAgY29uc29sZS5pbmZvKFwiUm9sbGVyIGdvb2QgaXRlcmF0aW9uczogXCIgKyBiZXN0SXRlcmF0aW9ucyk7XG4gIGNvbnNvbGUuaW5mbyhcIkZpbmFsICgrZGVjb2Rlcik6IFwiICsgcmVzdWx0SHRtbC5sZW5ndGgpO1xuICB3cml0ZUZpbGVTeW5jKFwiYnVpbGQvcm9hZHJvbGxlci5odG1sXCIsIHJlc3VsdEh0bWwpO1xuICByZXR1cm4gcmVzdWx0SHRtbDtcbn1cblxuLyoqXG4gKiBFbWJlZHMgQ1NTIGludG8gdGhlIEhUTUwuXG4gKiBAcGFyYW0gaHRtbCBUaGUgb3JpZ2luYWwgSFRNTC5cbiAqIEBwYXJhbSBhc3NldCBUaGUgQ1NTIGFzc2V0LlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybWVkIEhUTUwgd2l0aCB0aGUgQ1NTIGVtYmVkZGVkLlxuICovXG5mdW5jdGlvbiBlbWJlZENzcyhodG1sOiBzdHJpbmcsIGFzc2V0OiBPdXRwdXRBc3NldCk6IHN0cmluZyB7XG4gIGNvbnN0IHJlQ1NTID0gbmV3IFJlZ0V4cChcbiAgICBgPGxpbmsgW14+XSo/aHJlZj1cIlsuL10qJHtlc2NhcGVSZWdFeHAoYXNzZXQuZmlsZU5hbWUpfVwiW14+XSo/PmBcbiAgKTtcbiAgY29uc3QgY29kZSA9IGA8c3R5bGU+JHtcbiAgICBuZXcgQ2xlYW5DU1MoeyBsZXZlbDogMiB9KS5taW5pZnkoYXNzZXQuc291cmNlIGFzIHN0cmluZykuc3R5bGVzXG4gIH08L3N0eWxlPmA7XG4gIHJldHVybiBodG1sLnJlcGxhY2UocmVDU1MsIGNvZGUpO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXHRvb2xzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJEOlxcXFxjb2RlXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXGNhdC1zdXJ2aXZvcnMtbWFzdGVyXFxcXHRvb2xzXFxcXHV0aWxzLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9jb2RlL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL2NhdC1zdXJ2aXZvcnMtbWFzdGVyL3Rvb2xzL3V0aWxzLnRzXCI7aW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5cbi8qKlxuICogQSB0eXBlIHRoYXQgcmVwcmVzZW50cyBhIHZhbHVlIHRoYXQgY2FuIGJlIGVuYWJsZWQgb3IgZGlzYWJsZWQuXG4gKi9cbmV4cG9ydCB0eXBlIEVuYWJsZWRPcHRpb25zPFQ+ID0gVCB8IGZhbHNlO1xuXG4vKipcbiAqIEVzY2FwZXMgYSBzdHJpbmcgc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBpbiBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyBUaGUgZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjk2OTQ4Ni8yMDUxNzI0XG4gIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpOyAvLyAkJiBtZWFucyB0aGUgd2hvbGUgbWF0Y2hlZCBzdHJpbmdcbn1cblxuLyoqXG4gKiBBZGRzIGRlZmF1bHQgdmFsdWVzIHRvIGFuIG9iamVjdC5cbiAqIFBlcmZvcm1zIG5lc3RlZCBtZXJnZSBhbmQgbXV0YXRlcyB0aGUgYmFzZSBvYmplY3QuXG4gKiBAcGFyYW0gYSBUaGUgYmFzZSBvYmplY3QuIFRoaXMgb2JqZWN0IHdpbGwgYmUgbXV0YXRlZC4gVGhpcyB3b3VsZCBub3JtYWxseSBiZSB1c2VyIHNwZWNpZmllZCB2YWx1ZXMuXG4gKiBAcGFyYW0gYiBUaGUgb2JqZWN0IHRvIG1lcmdlIGludG8gdGhlIGJhc2Ugb2JqZWN0LiBUaGlzIG9iamVjdCB3aWxsIG5vdCBiZSBtdXRhdGVkLiBUaGlzIHdvdWxkIG5vcm1hbGx5IGJlIGRlZmF1bHQgdmFsdWVzLlxuICogQHJldHVybnMgVGhlIG1lcmdlZCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREZWZhdWx0VmFsdWVzPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgYTogVCB8IHVuZGVmaW5lZCxcbiAgYjogVFxuKTogVCB7XG4gIGlmICghYSkge1xuICAgIHJldHVybiBiO1xuICB9XG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGIpIGFzIFtrZXlvZiBULCBhbnldW10pIHtcbiAgICBpZiAoYVtrXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHYpICYmIGlzT2JqZWN0KGFba10pKSB7XG4gICAgICBhW2tdID0gYWRkRGVmYXVsdFZhbHVlcyhhW2tdLCB2KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEpzMTNrU3RhdHMocHJlZml4OiBzdHJpbmcsIHNpemU6IG51bWJlcik6IHZvaWQge1xuICBjb25zdCBwZXJjZW50ID0gKChzaXplIC8gMTNfMzEyKSAqIDEwMCkudG9GaXhlZCgyKTtcbiAgY29uc29sZS5sb2coYCR7cHJlZml4fSBzaXplOiAke3NpemV9IGJ5dGVzICgke3BlcmNlbnR9JSBvZiAxMyBLQilgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGl0ZW06IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuICEhaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIjtcbn1cblxuLy8gVXRpbHMgZnJvbSB2aXRlLXBsdWdpbi1pbWFnZW1pblxuLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vdmJlbmpzL3ZpdGUtcGx1Z2luLWltYWdlbWluL2Jsb2IvbWFpbi9wYWNrYWdlcy9jb3JlL3NyYy91dGlscy50c1xuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbihhcmc6IHVua25vd24pOiBhcmcgaXMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCb29sZWFuKGFyZzogdW5rbm93bik6IGFyZyBpcyBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09IFwiYm9vbGVhblwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb3RGYWxzZShhcmc6IHVua25vd24pOiBhcmcgaXMgYm9vbGVhbiB7XG4gIHJldHVybiAhKGlzQm9vbGVhbihhcmcpICYmICFhcmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWdFeHAoYXJnOiB1bmtub3duKTogYXJnIGlzIFJlZ0V4cCB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gXCJbb2JqZWN0IFJlZ0V4cF1cIjtcbn1cblxuLyoqXG4gKiBSZWFkIGFsbCBmaWxlcyBpbiB0aGUgc3BlY2lmaWVkIGZvbGRlciwgZmlsdGVyIHRocm91Z2ggcmVndWxhciBydWxlcywgYW5kIHJldHVybiBmaWxlIHBhdGggYXJyYXlcbiAqIEBwYXJhbSByb290IFNwZWNpZnkgdGhlIGZvbGRlciBwYXRoXG4gKiBbQHBhcmFtXSByZWcgUmVndWxhciBleHByZXNzaW9uIGZvciBmaWx0ZXJpbmcgZmlsZXMsIG9wdGlvbmFsIHBhcmFtZXRlcnNcbiAqIE5vdGU6IEl0IGNhbiBhbHNvIGJlIGRlZm9ybWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhlIGZpbGUgcGF0aCBjb25mb3JtcyB0byByZWd1bGFyIHJ1bGVzLiBUaGUgcGF0aCBjYW4gYmUgYSBmb2xkZXIgb3IgYSBmaWxlLiBUaGUgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0IGlzIGFsc28gZmF1bHQtdG9sZXJhbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkQWxsRmlsZXMocm9vdDogc3RyaW5nLCByZWc/OiBSZWdFeHApOiBzdHJpbmdbXSB7XG4gIGxldCByZXN1bHRBcnI6IHN0cmluZ1tdID0gW107XG4gIHRyeSB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMocm9vdCkpIHtcbiAgICAgIGNvbnN0IHN0YXQgPSBmcy5sc3RhdFN5bmMocm9vdCk7XG4gICAgICBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmMocm9vdCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IHQgPSByZWFkQWxsRmlsZXMocGF0aC5qb2luKHJvb3QsIFwiL1wiLCBmaWxlKSwgcmVnKTtcbiAgICAgICAgICByZXN1bHRBcnIgPSByZXN1bHRBcnIuY29uY2F0KHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihyZWcudGVzdCkgJiYgcmVnLnRlc3Qocm9vdCkpIHtcbiAgICAgICAgICAgIHJlc3VsdEFyci5wdXNoKHJvb3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRBcnIucHVzaChyb290KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0QXJyO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUE2VSxTQUFTLGNB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
